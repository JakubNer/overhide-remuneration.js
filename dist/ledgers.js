(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory(require("web3"));
	else if(typeof define === 'function' && define.amd)
		define("__oh$__", ["web3"], factory);
	else if(typeof exports === 'object')
		exports["__oh$__"] = factory(require("web3"));
	else
		root["__oh$__"] = factory(root["Web3"]);
})(window, function(__WEBPACK_EXTERNAL_MODULE_web3__) {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/ledgers.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvd2VicGFjay9idWlsZGluL2dsb2JhbC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL19fb2gkX18vKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzP2NkMDAiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGc7XG5cbi8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlXG5nID0gKGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4gdGhpcztcbn0pKCk7XG5cbnRyeSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgZXZhbCBpcyBhbGxvd2VkIChzZWUgQ1NQKVxuXHRnID0gZyB8fCBuZXcgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1xufSBjYXRjaCAoZSkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxuXHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIikgZyA9IHdpbmRvdztcbn1cblxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxuLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3Ncbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cblxubW9kdWxlLmV4cG9ydHMgPSBnO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/webpack/buildin/global.js\n");

/***/ }),

/***/ "./src/ledgers.js":
/*!************************!*\
  !*** ./src/ledgers.js ***!
  \************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(global) {/* harmony import */ var web3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! web3 */ \"web3\");\n/* harmony import */ var web3__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(web3__WEBPACK_IMPORTED_MODULE_0__);\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\n\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n //     ledgers.js \n//     https://ledger.overhide.io\n//     (c) 2021 Overhide LLC, Wyoming, USA\n//     ledgers.js may be freely distributed under the MIT license.\n\n/**\r\n * @namespace oh$\r\n * @description \r\n * \r\n * #### REFERENCES\r\n * \r\n * Library code: https://github.com/overhide/ledgers.js/blob/master/dist/ledgers.js.\r\n *\r\n * Repository for this library is https://github.com/overhide/ledgers.js.\r\n * \r\n * The repository contains a demo app of this library working in conjunction with the *overhide* Ethereum remuneration\r\n * provider (Rinkeby testnet -- https://rinkeby.ethereum.overhide.io) and the *overhide-ledger* (test environment -- https://test.ledger.overhide.io)\r\n * \r\n * #### ABOUT\r\n * \r\n * JavaScript library to be used in-browser and interrogate *overhide* remuneration providers as to validity\r\n * of ledger credentials and transactions involving these credentials.\r\n * \r\n * The goal of the library and the *overhide* remuneration providers is to ease using of all types of ledgers for\r\n * authentication (I am who I say) and authorization (paid access tiers).\r\n * \r\n * The library leverages injected currency wallets where it can, and exposes functions to work with *loose* currencies \r\n * (without wallets) where it cannot.\r\n * \r\n * The library exports the `oh$` object for use as a module when bundling.\r\n * \r\n * ```\r\n * import oh$ from \"ledgers.js\";\r\n * oh$.enable(token);\r\n * oh$.addEventListener('onWalletChange', (e) => {...});\r\n * ```\r\n * \r\n * > APIs abstracted by *ledgers.js* require a bearer-token.  The `token` (above) is passed in to `enable` the rest of the library's\r\n * > functionality.  `oh$.enable(..)` can be called every so often with a refreshed token.\r\n * >\r\n * >  A token can be retrieved with a `GET /token` call (see https://token.overhide.io/swagger.html).\r\n * >\r\n * > To retrieve tokens please first register for your own API key at https://token.overhide.io/register.\r\n * \r\n * The library can be loaded straight into your HTML (along with pre-requisite `web3.min.js`) and accessed by its `oh$` property from the browser's `window` object:\r\n * \r\n * ```\r\n * <script src=\"https://cdnjs.cloudflare.com/ajax/libs/web3/1.3.4/web3.min.js\" integrity=\"sha512-TTGImODeszogiro9DUvleC9NJVnxO6M0+69nbM3YE9SYcVe4wZp2XYpELtcikuFZO9vjXNPyeoHAhS5DHzX1ZQ==\" crossorigin=\"anonymous\"></script>\r\n * <script src=\"./dist/ledgers.js\"></script>\r\n * <script>\r\n *   oh$.enable(token);\r\n *   oh$.addEventListener('onWalletChange', (e) => {...});\r\n * </script>\r\n * ```\r\n * \r\n * #### IMPARTERS\r\n * \r\n * The library works with a concept of *imprater* tags.  Wallets impart credentials, signatures, and transactions.  For\r\n * *loose change*--where no wallet exists--the library can be interrogated as to which entities should be set by the \r\n * user (can* functions); causing the entities to be imparted back to the user in a common code flow.  \r\n * \r\n * The imparter tags are a simple naming convention.  For example if multiple Ethereum wallet APIs were imparting data \r\n * they  would be individually tagged with a prefix \"eth\" and a dashed suffix.  No suffix indicates a *loose change*\r\n * imparter:\r\n * \r\n * - eth-web3\r\n * - eth-?\r\n * \r\n * Similarly for *overhide-ledger*, the prefix is \"ohledger\", the suffix won't be attached on the *loose change* version \r\n * and will be suffixed on the *web3* walleted version:\r\n * \r\n * - ohledger\r\n * - ohledger-web3\r\n * \r\n * The following sections cover special notes on each imparter.  The library adheres to these notes.\r\n * \r\n * ##### eth-web3\r\n * \r\n * Ethereum addresses are 20 bytes: 42 character 'hex' strings prefixed with '0x'.\r\n * \r\n * Ethereum secret keys for signing addresses are 32 bytes: 66 character 'hex' strings prefixed with '0x'.\r\n * \r\n * Ethereum networks names are:\r\n * \r\n * * main\r\n * * kovan\r\n * * rinkeyby\r\n * * ropsten\r\n * \r\n * The denomination for amounts is the Wei\r\n * \r\n * ##### ohledger, ohledger-web3\r\n * \r\n * Addresses and secret keys use Ethereum format.\r\n * \r\n * Addresses are 20 bytes: 42 character 'hex' strings prefixed with '0x'.\r\n * \r\n * Secret keys for signing addresses are 32 bytes: 66 character 'hex' strings prefixed with '0x'.\r\n * \r\n * Network tuples consist of a 'currency' as a three letter ISO fiat currency code and a 'mode'.  The supported\r\n * 'currency' names are:\r\n * \r\n * * 'USD'\r\n * \r\n * The denominations are:\r\n * \r\n * | Currency | denomination |\r\n * | --- | --- |\r\n * | USD | cents |\r\n * \r\n * Note: at this point only USD are supported.  If there is a need, and *overhide-ledger* instances in currencies\r\n * other than USD come online, we'll revisit this.\r\n *\r\n * An 'ohledger' mode is on of 'prod' or 'test'\r\n * \r\n */\n\nvar oh$ = function () {\n  var root = (typeof self === \"undefined\" ? \"undefined\" : _typeof(self)) == 'object' && self.self === self && self || (typeof global === \"undefined\" ? \"undefined\" : _typeof(global)) == 'object' && global.global === global && global || this || {};\n  root.oh$ = new ( /*#__PURE__*/function (_EventTarget) {\n    _inherits(_class2, _EventTarget);\n\n    var _super = _createSuper(_class2);\n\n    function _class2() {\n      var _this;\n\n      _classCallCheck(this, _class2);\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this = _super.call.apply(_super, [this].concat(args));\n\n      _defineProperty(_assertThisInitialized(_this), \"enable\", enable);\n\n      _defineProperty(_assertThisInitialized(_this), \"getImparterTags\", getImparterTags);\n\n      _defineProperty(_assertThisInitialized(_this), \"canSetCredentials\", canSetCredentials);\n\n      _defineProperty(_assertThisInitialized(_this), \"canGenerateCredentials\", canGenerateCredentials);\n\n      _defineProperty(_assertThisInitialized(_this), \"canChangeNetwork\", canChangeNetwork);\n\n      _defineProperty(_assertThisInitialized(_this), \"generateCredentials\", generateCredentials);\n\n      _defineProperty(_assertThisInitialized(_this), \"setCredentials\", setCredentials);\n\n      _defineProperty(_assertThisInitialized(_this), \"setNetwork\", setNetwork);\n\n      _defineProperty(_assertThisInitialized(_this), \"getOverhideRemunerationAPIUri\", getOverhideRemunerationAPIUri);\n\n      _defineProperty(_assertThisInitialized(_this), \"getCredentials\", getCredentials);\n\n      _defineProperty(_assertThisInitialized(_this), \"getNetwork\", getNetwork);\n\n      _defineProperty(_assertThisInitialized(_this), \"getFromDollars\", getFromDollars);\n\n      _defineProperty(_assertThisInitialized(_this), \"getTallyDollars\", getTallyDollars);\n\n      _defineProperty(_assertThisInitialized(_this), \"getTally\", getTally);\n\n      _defineProperty(_assertThisInitialized(_this), \"getTransactions\", getTransactions);\n\n      _defineProperty(_assertThisInitialized(_this), \"isOnLedger\", isOnLedger);\n\n      _defineProperty(_assertThisInitialized(_this), \"sign\", sign);\n\n      _defineProperty(_assertThisInitialized(_this), \"createTransaction\", createTransaction);\n\n      return _this;\n    }\n\n    return _class2;\n  }( /*#__PURE__*/_wrapNativeSuper(EventTarget)))();\n  var WALLET_CHECK_INTERVAL_MS = 500;\n  var ETH_WEB3_IMPARTER_TAG = 'eth-web3';\n  var OHLEDGER_IMPARTER_TAG = 'ohledger';\n  var OHLEDGER_WEB3_IMPARTER_TAG = 'ohledger-web3';\n  var doEnable = null;\n  var isEnabled = new Promise(function (resolve) {\n    return doEnable = resolve;\n  });\n  var token = null;\n  var __fetch = null;\n  var imparterTags = [OHLEDGER_IMPARTER_TAG];\n  var data = {\n    ETH_WEB3_IMPARTER_TAG: {\n      walletAddress: null,\n      network: null,\n      remuneration_uri: {\n        'main': 'https://ethereum.overhide.io',\n        'rinkeby': 'https://rinkeby.ethereum.overhide.io'\n      }\n    },\n    OHLEDGER_IMPARTER_TAG: {\n      oh_ledger_transact_fn: {\n        'prod': null,\n        'test': null\n      },\n      address: null,\n      secret: null,\n      mode: 'test',\n      remuneration_uri: {\n        'prod': 'https://ledger.overhide.io/v1',\n        'test': 'https://test.ledger.overhide.io/v1'\n      }\n    },\n    OHLEDGER_WEB3_IMPARTER_TAG: {\n      oh_ledger_transact_fn: {\n        'prod': null,\n        'test': null\n      },\n      walletAddress: null,\n      mode: 'test',\n      remuneration_uri: {\n        'prod': 'https://ledger.overhide.io/v1',\n        'test': 'https://test.ledger.overhide.io/v1'\n      }\n    }\n  };\n  var eth_accounts = new web3__WEBPACK_IMPORTED_MODULE_0___default.a('http://localhost:8545').eth.accounts;\n  createPopup();\n  detectWeb3Wallet();\n  /**\r\n   * Function to fire events.\r\n   * \r\n   * @param {string} which - event name to fire\r\n   * @param {Object} params - to copy to event\r\n   */\n\n  function fire(which, params) {\n    var event = document.createEvent(\"Event\");\n    event.initEvent(which, true, true);\n\n    for (var param in params) {\n      event[param] = params[param];\n    }\n\n    oh$.dispatchEvent(event);\n  }\n  /**\r\n   * Setup window.web3 to be the wallet's if available or offline if not (just for signing).\r\n   * \r\n   * Sets up a timer to check for wallet being logged in and address changes.\r\n   * \r\n   * @ignore\r\n   */\n\n\n  function detectWeb3Wallet() {\n    if (!window.ethereum) return; // Modern dapp browsers...\n\n    _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n      return regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return window.ethereum.enable();\n\n            case 3:\n              window.web3 = new web3__WEBPACK_IMPORTED_MODULE_0___default.a(window.ethereum);\n              _context2.next = 8;\n              break;\n\n            case 6:\n              _context2.prev = 6;\n              _context2.t0 = _context2[\"catch\"](0);\n\n            case 8:\n              _context2.next = 10;\n              return detectWalletCb();\n\n            case 10:\n              setInterval( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n                return regeneratorRuntime.wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        _context.next = 2;\n                        return detectWalletCb();\n\n                      case 2:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _callee);\n              })), WALLET_CHECK_INTERVAL_MS);\n\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 6]]);\n    }))();\n\n    var detectWalletCb = /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n        var currentAccounts, currentAddress, currentNetwork, imparterTagIndex, _imparterTagIndex;\n\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                _context3.next = 3;\n                return window.web3.eth.getAccounts();\n\n              case 3:\n                currentAccounts = _context3.sent;\n                currentAddress = currentAccounts && currentAccounts.length > 0 ? currentAccounts[0] : null;\n                _context3.next = 7;\n                return window.web3.eth.net.getNetworkType();\n\n              case 7:\n                currentNetwork = _context3.sent;\n                _context3.next = 12;\n                break;\n\n              case 10:\n                _context3.prev = 10;\n                _context3.t0 = _context3[\"catch\"](0);\n\n              case 12:\n                if (currentNetwork !== data.ETH_WEB3_IMPARTER_TAG.network) {\n                  data.ETH_WEB3_IMPARTER_TAG.network = currentNetwork;\n                  fire('onNetworkChange', {\n                    imparterTag: ETH_WEB3_IMPARTER_TAG,\n                    name: currentNetwork,\n                    uri: data.ETH_WEB3_IMPARTER_TAG.remuneration_uri[currentNetwork]\n                  });\n                }\n\n                if (currentAddress !== data.ETH_WEB3_IMPARTER_TAG.walletAddress) {\n                  if (currentAddress) {\n                    /* add imparters */\n                    imparterTagIndex = imparterTags.findIndex(function (v) {\n                      return v === ETH_WEB3_IMPARTER_TAG;\n                    });\n                    if (imparterTagIndex == -1) imparterTags.push(ETH_WEB3_IMPARTER_TAG);\n                    imparterTagIndex = imparterTags.findIndex(function (v) {\n                      return v === OHLEDGER_WEB3_IMPARTER_TAG;\n                    });\n                    if (imparterTagIndex == -1) imparterTags.push(OHLEDGER_WEB3_IMPARTER_TAG);\n                  } else {\n                    /* remove imparters */\n                    _imparterTagIndex = imparterTags.findIndex(function (v) {\n                      return v === ETH_WEB3_IMPARTER_TAG;\n                    });\n                    if (_imparterTagIndex > -1) imparterTags.splice(_imparterTagIndex, 1);\n                    _imparterTagIndex = imparterTags.findIndex(function (v) {\n                      return v === OHLEDGER_WEB3_IMPARTER_TAG;\n                    });\n                    if (_imparterTagIndex > -1) imparterTags.splice(_imparterTagIndex, 1);\n                  }\n\n                  data.ETH_WEB3_IMPARTER_TAG.walletAddress = currentAddress;\n                  data.OHLEDGER_WEB3_IMPARTER_TAG.walletAddress = currentAddress;\n                  fire('onWalletChange', {\n                    imparterTag: ETH_WEB3_IMPARTER_TAG,\n                    isPresent: !!currentAddress\n                  });\n                  fire('onWalletChange', {\n                    imparterTag: OHLEDGER_WEB3_IMPARTER_TAG,\n                    isPresent: !!currentAddress\n                  });\n\n                  if (currentAddress) {\n                    fire('onCredentialsUpdate', {\n                      imparterTag: ETH_WEB3_IMPARTER_TAG,\n                      address: currentAddress\n                    });\n                    fire('onCredentialsUpdate', {\n                      imparterTag: OHLEDGER_WEB3_IMPARTER_TAG,\n                      address: currentAddress\n                    });\n                  }\n                }\n\n              case 14:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[0, 10]]);\n      }));\n\n      return function detectWalletCb() {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n  }\n\n  function enable(_token) {\n    var _ref4 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      fetcher: fetch\n    },\n        fetcher = _ref4.fetcher;\n\n    token = _token;\n    __fetch = fetcher;\n    doEnable(true);\n  }\n\n  function getImparterTags() {\n    return imparterTags;\n  }\n\n  function canSetCredentials(imparterTag) {\n    return imparterTag === OHLEDGER_IMPARTER_TAG;\n  }\n\n  function canGenerateCredentials(imparterTag) {\n    return imparterTag === OHLEDGER_IMPARTER_TAG;\n  }\n\n  function canChangeNetwork(imparterTag) {\n    switch (imparterTag) {\n      case OHLEDGER_IMPARTER_TAG:\n      case OHLEDGER_WEB3_IMPARTER_TAG:\n        return true;\n\n      default:\n        return false;\n    }\n  }\n\n  function setCredentials(_x, _x2) {\n    return _setCredentials.apply(this, arguments);\n  }\n\n  function _setCredentials() {\n    _setCredentials = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(imparterTag, credentials) {\n      return regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.t0 = imparterTag;\n              _context4.next = _context4.t0 === OHLEDGER_IMPARTER_TAG ? 3 : 17;\n              break;\n\n            case 3:\n              if ('secret' in credentials) {\n                _context4.next = 5;\n                break;\n              }\n\n              throw new Error(\"'secret' must be passed in\");\n\n            case 5:\n              if ('address' in credentials && credentials.address) {\n                data.OHLEDGER_IMPARTER_TAG.address = credentials.address.toLowerCase();\n              } else {\n                data.OHLEDGER_IMPARTER_TAG.address = eth_accounts.privateKeyToAccount(credentials.secret).address.toLowerCase();\n              }\n\n              data.OHLEDGER_IMPARTER_TAG.secret = credentials.secret;\n              _context4.prev = 7;\n\n              if (eth_accounts.recover(eth_accounts.sign('test message', data.OHLEDGER_IMPARTER_TAG.secret)).toLowerCase() == data.OHLEDGER_IMPARTER_TAG.address) {\n                _context4.next = 10;\n                break;\n              }\n\n              throw new Error(\"'secret' not valid for 'address\");\n\n            case 10:\n              _context4.next = 15;\n              break;\n\n            case 12:\n              _context4.prev = 12;\n              _context4.t1 = _context4[\"catch\"](7);\n              throw new Error(\"'secret' not valid for 'address\");\n\n            case 15:\n              fire('onCredentialsUpdate', {\n                imparterTag: OHLEDGER_IMPARTER_TAG,\n                address: data.OHLEDGER_IMPARTER_TAG.address,\n                secret: data.OHLEDGER_IMPARTER_TAG.secret\n              });\n              return _context4.abrupt(\"return\", true);\n\n            case 17:\n              return _context4.abrupt(\"return\", false);\n\n            case 18:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[7, 12]]);\n    }));\n    return _setCredentials.apply(this, arguments);\n  }\n\n  function getCredentials(imparterTag) {\n    switch (imparterTag) {\n      case OHLEDGER_IMPARTER_TAG:\n        return {\n          \"address\": data.OHLEDGER_IMPARTER_TAG.address,\n          \"secret\": data.OHLEDGER_IMPARTER_TAG.secret\n        };\n\n      case OHLEDGER_WEB3_IMPARTER_TAG:\n        return {\n          \"address\": data.OHLEDGER_WEB3_IMPARTER_TAG.walletAddress\n        };\n\n      case ETH_WEB3_IMPARTER_TAG:\n        return {\n          \"address\": data.ETH_WEB3_IMPARTER_TAG.walletAddress\n        };\n\n      default:\n        throw new Error(\"invalid imparterTag\");\n    }\n  }\n\n  function generateCredentials(_x3, _x4) {\n    return _generateCredentials.apply(this, arguments);\n  }\n\n  function _generateCredentials() {\n    _generateCredentials = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5(imparterTag, options) {\n      var res;\n      return regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.t0 = imparterTag;\n              _context5.next = _context5.t0 === OHLEDGER_IMPARTER_TAG ? 3 : 8;\n              break;\n\n            case 3:\n              res = eth_accounts.create();\n              data.OHLEDGER_IMPARTER_TAG.address = res.address.toLowerCase();\n              data.OHLEDGER_IMPARTER_TAG.secret = res.privateKey;\n              fire('onCredentialsUpdate', {\n                imparterTag: OHLEDGER_IMPARTER_TAG,\n                address: data.OHLEDGER_IMPARTER_TAG.address,\n                secret: data.OHLEDGER_IMPARTER_TAG.secret\n              });\n              return _context5.abrupt(\"return\", true);\n\n            case 8:\n              return _context5.abrupt(\"return\", false);\n\n            case 9:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n    return _generateCredentials.apply(this, arguments);\n  }\n\n  function setNetwork(_x5, _x6) {\n    return _setNetwork.apply(this, arguments);\n  }\n\n  function _setNetwork() {\n    _setNetwork = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee6(imparterTag, details) {\n      return regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              if (!(ETH_WEB3_IMPARTER_TAG == imparterTag)) {\n                _context6.next = 2;\n                break;\n              }\n\n              return _context6.abrupt(\"return\", false);\n\n            case 2:\n              if ('currency' in details) {\n                _context6.next = 4;\n                break;\n              }\n\n              throw new Error(\"'currency' must be passed in\");\n\n            case 4:\n              if ('mode' in details) {\n                _context6.next = 6;\n                break;\n              }\n\n              throw new Error(\"'mode' must be passed in\");\n\n            case 6:\n              details.currency = details.currency.toUpperCase();\n              details.mode = details.mode.toLowerCase();\n\n              if (!(details.currency !== 'USD')) {\n                _context6.next = 10;\n                break;\n              }\n\n              throw new Error(\"'currency' must be 'USD'\");\n\n            case 10:\n              if (!(details.mode !== 'prod' && details.mode !== 'test')) {\n                _context6.next = 12;\n                break;\n              }\n\n              throw new Error(\"'mode' must be 'prod' or 'test'\");\n\n            case 12:\n              _context6.t0 = imparterTag;\n              _context6.next = _context6.t0 === OHLEDGER_IMPARTER_TAG ? 15 : _context6.t0 === OHLEDGER_WEB3_IMPARTER_TAG ? 18 : 21;\n              break;\n\n            case 15:\n              data.OHLEDGER_IMPARTER_TAG.mode = details.mode;\n              fire('onNetworkChange', {\n                imparterTag: OHLEDGER_IMPARTER_TAG,\n                currency: 'USD',\n                mode: details.mode,\n                uri: data.OHLEDGER_IMPARTER_TAG.remuneration_uri[details.mode]\n              });\n              return _context6.abrupt(\"return\", true);\n\n            case 18:\n              data.OHLEDGER_WEB3_IMPARTER_TAG.mode = details.mode;\n              fire('onNetworkChange', {\n                imparterTag: OHLEDGER_WEB3_IMPARTER_TAG,\n                currency: 'USD',\n                mode: details.mode,\n                uri: data.OHLEDGER_WEB3_IMPARTER_TAG.remuneration_uri[details.mode]\n              });\n              return _context6.abrupt(\"return\", true);\n\n            case 21:\n              return _context6.abrupt(\"return\", false);\n\n            case 22:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6);\n    }));\n    return _setNetwork.apply(this, arguments);\n  }\n\n  function getNetwork(imparterTag) {\n    switch (imparterTag) {\n      case OHLEDGER_IMPARTER_TAG:\n        return {\n          \"currency\": \"USD\",\n          \"mode\": data.OHLEDGER_WEB3_IMPARTER_TAG.mode,\n          \"uri\": data.OHLEDGER_WEB3_IMPARTER_TAG.remuneration_uri[data.OHLEDGER_WEB3_IMPARTER_TAG.mode]\n        };\n\n      case OHLEDGER_WEB3_IMPARTER_TAG:\n        return {\n          \"currency\": \"USD\",\n          \"mode\": data.OHLEDGER_IMPARTER_TAG.mode,\n          \"uri\": data.OHLEDGER_IMPARTER_TAG.remuneration_uri[data.OHLEDGER_IMPARTER_TAG.mode]\n        };\n\n      case ETH_WEB3_IMPARTER_TAG:\n        return {\n          \"name\": data.ETH_WEB3_IMPARTER_TAG.network,\n          \"uri\": data.ETH_WEB3_IMPARTER_TAG.remuneration_uri[data.ETH_WEB3_IMPARTER_TAG.network]\n        };\n\n      default:\n        throw new Error(\"invalid imparterTag\");\n    }\n  }\n\n  function getOverhideRemunerationAPIUri(imparterTag) {\n    switch (imparterTag) {\n      case OHLEDGER_IMPARTER_TAG:\n        if (!data.OHLEDGER_IMPARTER_TAG.mode) throw new Error(\"network 'mode' must be set, use setNetwork\");\n        return data.OHLEDGER_IMPARTER_TAG.remuneration_uri[data.OHLEDGER_IMPARTER_TAG.mode];\n\n      case OHLEDGER_WEB3_IMPARTER_TAG:\n        if (!data.OHLEDGER_WEB3_IMPARTER_TAG.mode) throw new Error(\"network 'mode' must be set, use setNetwork\");\n        return data.OHLEDGER_WEB3_IMPARTER_TAG.remuneration_uri[data.OHLEDGER_WEB3_IMPARTER_TAG.mode];\n\n      case ETH_WEB3_IMPARTER_TAG:\n        return data.ETH_WEB3_IMPARTER_TAG.remuneration_uri[data.ETH_WEB3_IMPARTER_TAG.network];\n\n      default:\n        return null;\n    }\n  }\n\n  function getFromDollars(_x7, _x8) {\n    return _getFromDollars.apply(this, arguments);\n  }\n\n  function _getFromDollars() {\n    _getFromDollars = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee7(imparterTag, dollarAmount) {\n      var hostPrefix, now, result;\n      return regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              _context7.t0 = imparterTag;\n              _context7.next = _context7.t0 === OHLEDGER_IMPARTER_TAG ? 3 : _context7.t0 === OHLEDGER_WEB3_IMPARTER_TAG ? 3 : _context7.t0 === ETH_WEB3_IMPARTER_TAG ? 4 : 19;\n              break;\n\n            case 3:\n              return _context7.abrupt(\"return\", dollarAmount * 100);\n\n            case 4:\n              hostPrefix = data.ETH_WEB3_IMPARTER_TAG.network === 'main' ? '' : 'test.';\n              now = new Date().toISOString();\n              _context7.next = 8;\n              return isEnabled;\n\n            case 8:\n              _context7.t1 = _context7.sent;\n\n              if (!_context7.t1) {\n                _context7.next = 11;\n                break;\n              }\n\n              _context7.t1 = !__fetch;\n\n            case 11:\n              if (!_context7.t1) {\n                _context7.next = 13;\n                break;\n              }\n\n              throw new Error('did you forget to `oh$.enable(..)`?');\n\n            case 13:\n              _context7.next = 15;\n              return __fetch(\"https://\".concat(hostPrefix, \"rates.overhide.io/rates/eth/\").concat(now), {\n                headers: new Headers({\n                  'Authorization': \"Bearer \".concat(token)\n                })\n              }).then(function (res) {\n                return res.json();\n              })[\"catch\"](function (e) {\n                throw String(e);\n              });\n\n            case 15:\n              result = _context7.sent;\n\n              if (!(!result || result.length === 0 || !'minrate' in result[0] || result[0].minrate === 0)) {\n                _context7.next = 18;\n                break;\n              }\n\n              return _context7.abrupt(\"return\", 0);\n\n            case 18:\n              return _context7.abrupt(\"return\", dollarAmount / result[0].minrate);\n\n            case 19:\n              return _context7.abrupt(\"return\", null);\n\n            case 20:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7);\n    }));\n    return _getFromDollars.apply(this, arguments);\n  }\n\n  function getTallyDollars(_x9, _x10, _x11) {\n    return _getTallyDollars.apply(this, arguments);\n  }\n\n  function _getTallyDollars() {\n    _getTallyDollars = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee8(imparterTag, recipient, date) {\n      var tally, txs, values, hostPrefix, now;\n      return regeneratorRuntime.wrap(function _callee8$(_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              _context8.t0 = imparterTag;\n              _context8.next = _context8.t0 === OHLEDGER_IMPARTER_TAG ? 3 : _context8.t0 === OHLEDGER_WEB3_IMPARTER_TAG ? 3 : _context8.t0 === ETH_WEB3_IMPARTER_TAG ? 7 : 26;\n              break;\n\n            case 3:\n              _context8.next = 5;\n              return getTally(imparterTag, recipient, date);\n\n            case 5:\n              tally = _context8.sent;\n              return _context8.abrupt(\"return\", (tally / 100).toFixed(2));\n\n            case 7:\n              _context8.next = 9;\n              return getTransactions(imparterTag, recipient, date);\n\n            case 9:\n              txs = _context8.sent;\n\n              if (!(!txs || txs.length == 0)) {\n                _context8.next = 12;\n                break;\n              }\n\n              return _context8.abrupt(\"return\", 0);\n\n            case 12:\n              values = txs.map(function (t) {\n                return \"\".concat(t['transaction-value'], \"@\").concat(new Date(t['transaction-date']).toISOString());\n              });\n              hostPrefix = data.ETH_WEB3_IMPARTER_TAG.network === 'main' ? '' : 'test.';\n              now = new Date().toISOString();\n              _context8.next = 17;\n              return isEnabled;\n\n            case 17:\n              _context8.t1 = _context8.sent;\n\n              if (!_context8.t1) {\n                _context8.next = 20;\n                break;\n              }\n\n              _context8.t1 = !__fetch;\n\n            case 20:\n              if (!_context8.t1) {\n                _context8.next = 22;\n                break;\n              }\n\n              throw new Error('did you forget to `oh$.enable(..)`?');\n\n            case 22:\n              _context8.next = 24;\n              return __fetch(\"https://\".concat(hostPrefix, \"rates.overhide.io/tallymax/wei/\").concat(values.join(',')), {\n                headers: new Headers({\n                  'Authorization': \"Bearer \".concat(token)\n                })\n              }).then(function (res) {\n                return res.text();\n              })[\"catch\"](function (e) {\n                throw String(e);\n              });\n\n            case 24:\n              tally = _context8.sent;\n              return _context8.abrupt(\"return\", (Math.round(tally * 100) / 100).toFixed(2));\n\n            case 26:\n              return _context8.abrupt(\"return\", null);\n\n            case 27:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, _callee8);\n    }));\n    return _getTallyDollars.apply(this, arguments);\n  }\n\n  function getTally(_x12, _x13, _x14) {\n    return _getTally.apply(this, arguments);\n  }\n\n  function _getTally() {\n    _getTally = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee9(imparterTag, recipient, date) {\n      return regeneratorRuntime.wrap(function _callee9$(_context9) {\n        while (1) {\n          switch (_context9.prev = _context9.next) {\n            case 0:\n              _context9.next = 2;\n              return getTxs(imparterTag, recipient, date, true);\n\n            case 2:\n              return _context9.abrupt(\"return\", _context9.sent.tally);\n\n            case 3:\n            case \"end\":\n              return _context9.stop();\n          }\n        }\n      }, _callee9);\n    }));\n    return _getTally.apply(this, arguments);\n  }\n\n  function getTransactions(_x15, _x16, _x17) {\n    return _getTransactions.apply(this, arguments);\n  }\n\n  function _getTransactions() {\n    _getTransactions = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee10(imparterTag, recipient, date) {\n      return regeneratorRuntime.wrap(function _callee10$(_context10) {\n        while (1) {\n          switch (_context10.prev = _context10.next) {\n            case 0:\n              _context10.next = 2;\n              return getTxs(imparterTag, recipient, date, false);\n\n            case 2:\n              return _context10.abrupt(\"return\", _context10.sent.transactions);\n\n            case 3:\n            case \"end\":\n              return _context10.stop();\n          }\n        }\n      }, _callee10);\n    }));\n    return _getTransactions.apply(this, arguments);\n  }\n\n  function getTxs(_x18, _x19, _x20, _x21) {\n    return _getTxs.apply(this, arguments);\n  } // raise oh$-event\n  // @param {string} imparterTag\n  // @param {string} triggerFor \n  // @param {Object} data - to stringify and sent as event.details.\n\n\n  function _getTxs() {\n    _getTxs = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee11(imparterTag, recipient, date, tallyOnly) {\n      var to, uri, from, since;\n      return regeneratorRuntime.wrap(function _callee11$(_context11) {\n        while (1) {\n          switch (_context11.prev = _context11.next) {\n            case 0:\n              if (!(date && !(date instanceof Date))) {\n                _context11.next = 2;\n                break;\n              }\n\n              throw new Error(\"'date' must be a Date is passed in\");\n\n            case 2:\n              if (!(!('address' in recipient) || !recipient.address)) {\n                _context11.next = 4;\n                break;\n              }\n\n              throw new Error(\"'address' required in recipient\");\n\n            case 4:\n              to = recipient.address;\n              uri = getOverhideRemunerationAPIUri(imparterTag);\n              _context11.t0 = imparterTag;\n              _context11.next = _context11.t0 === OHLEDGER_IMPARTER_TAG ? 9 : _context11.t0 === OHLEDGER_WEB3_IMPARTER_TAG ? 15 : _context11.t0 === ETH_WEB3_IMPARTER_TAG ? 21 : 27;\n              break;\n\n            case 9:\n              if (data.OHLEDGER_IMPARTER_TAG.mode) {\n                _context11.next = 11;\n                break;\n              }\n\n              throw new Error(\"network 'mode' must be set, use setNetwork\");\n\n            case 11:\n              if (data.OHLEDGER_IMPARTER_TAG.address) {\n                _context11.next = 13;\n                break;\n              }\n\n              throw new Error(\"from 'address' not set: use setCredentials\");\n\n            case 13:\n              from = data.OHLEDGER_IMPARTER_TAG.address;\n              return _context11.abrupt(\"break\", 28);\n\n            case 15:\n              if (data.OHLEDGER_WEB3_IMPARTER_TAG.mode) {\n                _context11.next = 17;\n                break;\n              }\n\n              throw new Error(\"network 'mode' must be set, use setNetwork\");\n\n            case 17:\n              if (data.OHLEDGER_WEB3_IMPARTER_TAG.walletAddress) {\n                _context11.next = 19;\n                break;\n              }\n\n              throw new Error(\"from 'walletAddress' not set: use wallet\");\n\n            case 19:\n              from = data.OHLEDGER_WEB3_IMPARTER_TAG.walletAddress;\n              return _context11.abrupt(\"break\", 28);\n\n            case 21:\n              if (data.ETH_WEB3_IMPARTER_TAG.network) {\n                _context11.next = 23;\n                break;\n              }\n\n              throw new Error(\"no network for imparter tag\");\n\n            case 23:\n              if (data.ETH_WEB3_IMPARTER_TAG.walletAddress) {\n                _context11.next = 25;\n                break;\n              }\n\n              throw new Error(\"from 'walletAddress' not set: use wallet\");\n\n            case 25:\n              from = data.ETH_WEB3_IMPARTER_TAG.walletAddress;\n              return _context11.abrupt(\"break\", 28);\n\n            case 27:\n              throw new Error('unsupported imparter tag');\n\n            case 28:\n              if (uri) {\n                _context11.next = 30;\n                break;\n              }\n\n              throw new Error('no uri for request, unsupported network selected in wallet?');\n\n            case 30:\n              since = '';\n\n              if (date) {\n                since = \"&since=\".concat(date.toISOString());\n              }\n\n              _context11.next = 34;\n              return isEnabled;\n\n            case 34:\n              _context11.t1 = _context11.sent;\n\n              if (!_context11.t1) {\n                _context11.next = 37;\n                break;\n              }\n\n              _context11.t1 = !__fetch;\n\n            case 37:\n              if (!_context11.t1) {\n                _context11.next = 39;\n                break;\n              }\n\n              throw new Error('did you forget to `oh$.enable(..)`?');\n\n            case 39:\n              _context11.next = 41;\n              return __fetch(\"\".concat(uri, \"/get-transactions/\").concat(from, \"/\").concat(to, \"?tally-only=\").concat(tallyOnly ? 'true' : 'false').concat(since, \"&include-refunds=true\"), {\n                headers: new Headers({\n                  'Authorization': \"Bearer \".concat(token)\n                })\n              }).then(function (res) {\n                return res.json();\n              })[\"catch\"](function (e) {\n                throw String(e);\n              });\n\n            case 41:\n              return _context11.abrupt(\"return\", _context11.sent);\n\n            case 42:\n            case \"end\":\n              return _context11.stop();\n          }\n        }\n      }, _callee11);\n    }));\n    return _getTxs.apply(this, arguments);\n  }\n\n  function raiseEventClick(imparterTag, triggerFor) {\n    window.parent.document.dispatchEvent(new CustomEvent('oh$-event', {\n      detail: JSON.stringify({\n        imparterTag: imparterTag,\n        triggerFor: triggerFor,\n        click: true\n      })\n    }));\n  } // raise oh$-event\n  // @param {string} imparterTag\n  // @param {string} triggerFor \n  // @param {Object} data - to stringify and sent as event.details.\n\n\n  function raiseEvent(imparterTag, triggerFor, data) {\n    window.parent.document.dispatchEvent(new CustomEvent('oh$-event', {\n      detail: JSON.stringify(_objectSpread(_objectSpread({}, data), {}, {\n        imparterTag: imparterTag,\n        triggerFor: triggerFor\n      }))\n    }));\n  }\n\n  function isOnLedger(_x22) {\n    return _isOnLedger.apply(this, arguments);\n  }\n\n  function _isOnLedger() {\n    _isOnLedger = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee12(imparterTag) {\n      var uri, from, message, signature;\n      return regeneratorRuntime.wrap(function _callee12$(_context12) {\n        while (1) {\n          switch (_context12.prev = _context12.next) {\n            case 0:\n              uri = getOverhideRemunerationAPIUri(imparterTag);\n              _context12.t0 = imparterTag;\n              _context12.next = _context12.t0 === OHLEDGER_IMPARTER_TAG ? 4 : _context12.t0 === OHLEDGER_WEB3_IMPARTER_TAG ? 10 : _context12.t0 === ETH_WEB3_IMPARTER_TAG ? 16 : 22;\n              break;\n\n            case 4:\n              if (data.OHLEDGER_IMPARTER_TAG.mode) {\n                _context12.next = 6;\n                break;\n              }\n\n              throw new Error(\"network 'mode' must be set, use setNetwork\");\n\n            case 6:\n              if (data.OHLEDGER_IMPARTER_TAG.address) {\n                _context12.next = 8;\n                break;\n              }\n\n              throw new Error(\"from 'address' not set: use setCredentials\");\n\n            case 8:\n              from = data.OHLEDGER_IMPARTER_TAG.address;\n              return _context12.abrupt(\"break\", 23);\n\n            case 10:\n              if (data.OHLEDGER_WEB3_IMPARTER_TAG.mode) {\n                _context12.next = 12;\n                break;\n              }\n\n              throw new Error(\"network 'mode' must be set, use setNetwork\");\n\n            case 12:\n              if (data.OHLEDGER_WEB3_IMPARTER_TAG.walletAddress) {\n                _context12.next = 14;\n                break;\n              }\n\n              throw new Error(\"from 'walletAddress' not set: use wallet\");\n\n            case 14:\n              from = data.OHLEDGER_WEB3_IMPARTER_TAG.walletAddress;\n              return _context12.abrupt(\"break\", 23);\n\n            case 16:\n              if (data.ETH_WEB3_IMPARTER_TAG.network) {\n                _context12.next = 18;\n                break;\n              }\n\n              throw new Error(\"no network for imparter tag\");\n\n            case 18:\n              if (data.ETH_WEB3_IMPARTER_TAG.walletAddress) {\n                _context12.next = 20;\n                break;\n              }\n\n              throw new Error(\"from 'walletAddress' not set: use wallet\");\n\n            case 20:\n              from = data.ETH_WEB3_IMPARTER_TAG.walletAddress;\n              return _context12.abrupt(\"break\", 23);\n\n            case 22:\n              throw new Error('unsupported imparter tag');\n\n            case 23:\n              if (uri) {\n                _context12.next = 25;\n                break;\n              }\n\n              throw new Error('no uri for request, unsupported network selected in wallet?');\n\n            case 25:\n              message = 'verify ownership of address by signing';\n              _context12.next = 28;\n              return sign(imparterTag, message);\n\n            case 28:\n              signature = _context12.sent;\n              _context12.next = 31;\n              return isEnabled;\n\n            case 31:\n              _context12.t1 = _context12.sent;\n\n              if (!_context12.t1) {\n                _context12.next = 34;\n                break;\n              }\n\n              _context12.t1 = !__fetch;\n\n            case 34:\n              if (!_context12.t1) {\n                _context12.next = 36;\n                break;\n              }\n\n              throw new Error('did you forget to `oh$.enable(..)`?');\n\n            case 36:\n              _context12.next = 38;\n              return __fetch(\"\".concat(uri, \"/is-signature-valid\"), {\n                method: \"POST\",\n                headers: {\n                  'Content-Type': 'application/json; charset=utf-8',\n                  'Authorization': \"Bearer \".concat(token)\n                },\n                body: JSON.stringify({\n                  signature: btoa(signature),\n                  message: btoa(message),\n                  address: from\n                })\n              }).then(function (result) {\n                if (result.status == 200) {\n                  return true;\n                } else {\n                  return false;\n                }\n              })[\"catch\"](function (e) {\n                throw String(e);\n              });\n\n            case 38:\n              return _context12.abrupt(\"return\", _context12.sent);\n\n            case 39:\n            case \"end\":\n              return _context12.stop();\n          }\n        }\n      }, _callee12);\n    }));\n    return _isOnLedger.apply(this, arguments);\n  }\n\n  function sign(_x23, _x24) {\n    return _sign.apply(this, arguments);\n  }\n\n  function _sign() {\n    _sign = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee13(imparterTag, message) {\n      return regeneratorRuntime.wrap(function _callee13$(_context13) {\n        while (1) {\n          switch (_context13.prev = _context13.next) {\n            case 0:\n              _context13.t0 = imparterTag;\n              _context13.next = _context13.t0 === OHLEDGER_IMPARTER_TAG ? 3 : _context13.t0 === OHLEDGER_WEB3_IMPARTER_TAG ? 6 : _context13.t0 === ETH_WEB3_IMPARTER_TAG ? 12 : 18;\n              break;\n\n            case 3:\n              if (data.OHLEDGER_IMPARTER_TAG.secret) {\n                _context13.next = 5;\n                break;\n              }\n\n              throw new Error(\"credentials for imparter \".concat(OHLEDGER_IMPARTER_TAG, \" not set\"));\n\n            case 5:\n              return _context13.abrupt(\"return\", eth_accounts.sign(message, data.OHLEDGER_IMPARTER_TAG.secret).signature);\n\n            case 6:\n              if (data.OHLEDGER_WEB3_IMPARTER_TAG.walletAddress) {\n                _context13.next = 8;\n                break;\n              }\n\n              throw new Error(\"imparter \".concat(OHLEDGER_WEB3_IMPARTER_TAG, \" not active\"));\n\n            case 8:\n              fire('onWalletPopup', {\n                imparterTag: OHLEDGER_WEB3_IMPARTER_TAG\n              });\n              _context13.next = 11;\n              return window.web3.eth.personal.sign(message, data.OHLEDGER_WEB3_IMPARTER_TAG.walletAddress, '');\n\n            case 11:\n              return _context13.abrupt(\"return\", _context13.sent);\n\n            case 12:\n              if (data.ETH_WEB3_IMPARTER_TAG.walletAddress) {\n                _context13.next = 14;\n                break;\n              }\n\n              throw new Error(\"imparter \".concat(ETH_WEB3_IMPARTER_TAG, \" not active\"));\n\n            case 14:\n              fire('onWalletPopup', {\n                imparterTag: ETH_WEB3_IMPARTER_TAG\n              });\n              _context13.next = 17;\n              return window.web3.eth.personal.sign(message, data.ETH_WEB3_IMPARTER_TAG.walletAddress, '');\n\n            case 17:\n              return _context13.abrupt(\"return\", _context13.sent);\n\n            case 18:\n              return _context13.abrupt(\"return\", null);\n\n            case 19:\n            case \"end\":\n              return _context13.stop();\n          }\n        }\n      }, _callee13);\n    }));\n    return _sign.apply(this, arguments);\n  }\n\n  function createTransaction(_x25, _x26, _x27, _x28) {\n    return _createTransaction.apply(this, arguments);\n  }\n\n  function _createTransaction() {\n    _createTransaction = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee14(imparterTag, amount, to, options) {\n      var from, message, signature, eventPromise;\n      return regeneratorRuntime.wrap(function _callee14$(_context14) {\n        while (1) {\n          switch (_context14.prev = _context14.next) {\n            case 0:\n              _context14.t0 = imparterTag;\n              _context14.next = _context14.t0 === OHLEDGER_IMPARTER_TAG ? 3 : _context14.t0 === OHLEDGER_WEB3_IMPARTER_TAG ? 9 : _context14.t0 === ETH_WEB3_IMPARTER_TAG ? 15 : 21;\n              break;\n\n            case 3:\n              if (data.OHLEDGER_IMPARTER_TAG.mode) {\n                _context14.next = 5;\n                break;\n              }\n\n              throw new Error(\"network 'mode' must be set, use setNetwork\");\n\n            case 5:\n              if (data.OHLEDGER_IMPARTER_TAG.address) {\n                _context14.next = 7;\n                break;\n              }\n\n              throw new Error(\"from 'address' not set: use setCredentials\");\n\n            case 7:\n              from = data.OHLEDGER_IMPARTER_TAG.address;\n              return _context14.abrupt(\"break\", 22);\n\n            case 9:\n              if (data.OHLEDGER_WEB3_IMPARTER_TAG.mode) {\n                _context14.next = 11;\n                break;\n              }\n\n              throw new Error(\"network 'mode' must be set, use setNetwork\");\n\n            case 11:\n              if (data.OHLEDGER_WEB3_IMPARTER_TAG.walletAddress) {\n                _context14.next = 13;\n                break;\n              }\n\n              throw new Error(\"from 'walletAddress' not set: use wallet\");\n\n            case 13:\n              from = data.OHLEDGER_WEB3_IMPARTER_TAG.walletAddress;\n              return _context14.abrupt(\"break\", 22);\n\n            case 15:\n              if (data.ETH_WEB3_IMPARTER_TAG.network) {\n                _context14.next = 17;\n                break;\n              }\n\n              throw new Error(\"no network for imparter tag\");\n\n            case 17:\n              if (data.ETH_WEB3_IMPARTER_TAG.walletAddress) {\n                _context14.next = 19;\n                break;\n              }\n\n              throw new Error(\"from 'walletAddress' not set: use wallet\");\n\n            case 19:\n              from = data.ETH_WEB3_IMPARTER_TAG.walletAddress;\n              return _context14.abrupt(\"break\", 22);\n\n            case 21:\n              throw new Error('unsupported imparter tag');\n\n            case 22:\n              _context14.t1 = imparterTag;\n              _context14.next = _context14.t1 === OHLEDGER_IMPARTER_TAG ? 25 : _context14.t1 === OHLEDGER_WEB3_IMPARTER_TAG ? 25 : _context14.t1 === ETH_WEB3_IMPARTER_TAG ? 44 : 48;\n              break;\n\n            case 25:\n              if (!(amount == 0)) {\n                _context14.next = 39;\n                break;\n              }\n\n              if (!('message' in options && options.message && 'signature' in options && options.signature)) {\n                _context14.next = 31;\n                break;\n              }\n\n              message = options.message;\n              signature = options.signature;\n              _context14.next = 35;\n              break;\n\n            case 31:\n              message = \"verify ownership of address by signing on \".concat(new Date().toLocaleString());\n              _context14.next = 34;\n              return sign(imparterTag, message);\n\n            case 34:\n              signature = _context14.sent;\n\n            case 35:\n              _context14.next = 37;\n              return showOhLedgerGratisIframeUri(imparterTag, from, signature, message);\n\n            case 37:\n              _context14.next = 43;\n              break;\n\n            case 39:\n              eventPromise = setupNewPromise();\n              data.OHLEDGER_IMPARTER_TAG.oh_ledger_transact_fn[data.OHLEDGER_IMPARTER_TAG.mode](amount, from, to);\n              _context14.next = 43;\n              return eventPromise;\n\n            case 43:\n              return _context14.abrupt(\"break\", 49);\n\n            case 44:\n              fire('onWalletPopup', {\n                imparterTag: ETH_WEB3_IMPARTER_TAG\n              });\n              _context14.next = 47;\n              return new Promise(function (resolve, reject) {\n                web3.eth.sendTransaction({\n                  from: from,\n                  to: to,\n                  value: amount\n                }).on('confirmation', function (confirmationNumber, receipt) {\n                  resolve();\n                }).on('error', function (error) {\n                  reject(error);\n                });\n              });\n\n            case 47:\n              return _context14.abrupt(\"break\", 49);\n\n            case 48:\n              throw new Error('unsupported imparter tag');\n\n            case 49:\n              return _context14.abrupt(\"return\", true);\n\n            case 50:\n            case \"end\":\n              return _context14.stop();\n          }\n        }\n      }, _callee14);\n    }));\n    return _createTransaction.apply(this, arguments);\n  }\n\n  var resolve = null;\n  var reject = null; // promise used for popups and resolutions via oh-ledger-* messages.\n\n  function setupNewPromise() {\n    console.assert(!resolve, 'oh-popup promise being set but already set when calling setupNewPromise(..)');\n    return new Promise(function (rs, rj) {\n      resolve = rs;\n      reject = rj;\n    });\n  } // make popup visible to be hidden with makePopupHidden\n\n\n  function makePopupVisible() {\n    var popup = document.getElementById('oh-popup-container');\n    popup.style.display = 'block';\n    return setupNewPromise();\n  }\n\n  function makePopupHidden(params, isError) {\n    var popup = document.getElementById('oh-popup-container');\n    hideAllPopupContents();\n    popup.style.display = 'none';\n    console.assert(resolve, 'oh-popup promise not set yet calling makePopupHidden(..)');\n    if (isError) reject(params);else resolve(params);\n    resolve = null;\n    reject = null;\n  }\n\n  window.addEventListener('message', function (e) {\n    if (e.data && e.data.event === 'oh-ledger-ok') {\n      makePopupHidden(e.data.detail);\n    } else if (e.data && e.data.event === 'oh-ledger-error') {\n      makePopupHidden(e.data.detail, true);\n    }\n  }, false);\n\n  function hideAllPopupContents() {\n    document.getElementById('oh-ledger-gratis-iframe').style.display = 'none';\n  }\n\n  function showOhLedgerGratisIframeUri(_x29, _x30, _x31, _x32) {\n    return _showOhLedgerGratisIframeUri.apply(this, arguments);\n  }\n\n  function _showOhLedgerGratisIframeUri() {\n    _showOhLedgerGratisIframeUri = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee15(imparterTag, from, signature, message) {\n      var uri, frame;\n      return regeneratorRuntime.wrap(function _callee15$(_context15) {\n        while (1) {\n          switch (_context15.prev = _context15.next) {\n            case 0:\n              hideAllPopupContents();\n              uri = getOverhideRemunerationAPIUri(imparterTag);\n              frame = document.getElementById('oh-ledger-gratis-iframe');\n              frame.setAttribute('src', \"\".concat(uri, \"/gratis.html?address=\").concat(from, \"&signature=\").concat(signature, \"&message=\").concat(message));\n              frame.style.display = 'block';\n              _context15.next = 7;\n              return makePopupVisible();\n\n            case 7:\n            case \"end\":\n              return _context15.stop();\n          }\n        }\n      }, _callee15);\n    }));\n    return _showOhLedgerGratisIframeUri.apply(this, arguments);\n  }\n\n  function createPopup() {\n    var popup = document.createElement('div');\n    popup.setAttribute('id', 'oh-popup-container');\n    popup.style.display = 'none';\n    popup.innerHTML = \"\\n      <div>\\n        <a href=\\\"#\\\" title=\\\"Close\\\" id=\\\"oh-popup-close\\\" onclick=\\\"window.parent.document.dispatchEvent(new CustomEvent('oh$-popup-close',{})); return false;\\\">X</a>\\n        <iframe id=\\\"oh-ledger-gratis-iframe\\\"></iframe>\\n      </div>\\n    \";\n    var style = document.createElement('style');\n    style.innerHTML = \"\\n      #oh-popup-container {\\n          position: fixed;\\n          font-family: arial, \\\"lucida console\\\", sans-serif;\\n          top: 0;\\n          right: 0;\\n          bottom: 0;\\n          left: 0;\\n          background: rgba(0, 0, 0, 0.8);\\n          z-index: 999;\\n          opacity:1;\\n          pointer-events: auto;\\n      }\\n      #oh-popup-container > div {\\n          width: 80vw;\\n          height: 75vh;\\n          position: relative;\\n          top: 15vh;\\n          margin: auto auto;\\n          padding: 5px 5px 5px 5px;\\n          background: white;\\n      }\\n      #oh-popup-close {\\n          background: grey;\\n          color: white;\\n          line-height: 25px;\\n          position: absolute;\\n          right: 2px;\\n          text-align: center;\\n          top: 2px;\\n          width: 24px;\\n          text-decoration: none;\\n          font-weight: bold;\\n      }\\n      #oh-popup-close:hover {\\n          background: black;\\n      }\\n\\n      #oh-ledger-gratis-iframe {\\n        display: none;\\n        border: 0;\\n        overflow: hidden;\\n        width: 100%;\\n        height: 100%;\\n      }\\n    \";\n\n    var attach = function attach() {\n      if (document.body) {\n        document.body.appendChild(popup);\n        document.body.appendChild(style);\n        loadOhLedgerTransactFns();\n      } else {\n        setTimeout(attach, 100);\n      }\n\n      ;\n    };\n\n    attach();\n  }\n\n  window.document.addEventListener('oh$-popup-close', function (e) {\n    makePopupHidden('user close', true);\n  }); // https://stackoverflow.com/a/31374433\n\n  function loadJS(url, implementationCode, location) {\n    //url is URL of external file, implementationCode is the code\n    //to be called from the file, location is the location to \n    //insert the <script> element\n    var scriptTag = document.createElement('script');\n    scriptTag.src = url;\n    scriptTag.onload = implementationCode;\n    scriptTag.onreadystatechange = implementationCode;\n    location.appendChild(scriptTag);\n  }\n\n  ;\n\n  function loadOhLedgerTransactFns() {\n    // load prod ohledger transact fn\n    loadJS(\"\".concat(data.OHLEDGER_IMPARTER_TAG.remuneration_uri.prod, \"/transact.js\"), function () {\n      data.OHLEDGER_IMPARTER_TAG.oh_ledger_transact_fn.prod = oh_ledger_transact;\n      data.OHLEDGER_WEB3_IMPARTER_TAG.oh_ledger_transact_fn.prod = oh_ledger_transact;\n    }, document.body); // load test ohledger transact fn\n\n    loadJS(\"\".concat(data.OHLEDGER_IMPARTER_TAG.remuneration_uri.test, \"/transact.js\"), function () {\n      data.OHLEDGER_IMPARTER_TAG.oh_ledger_transact_fn.test = oh_ledger_transact;\n      data.OHLEDGER_WEB3_IMPARTER_TAG.oh_ledger_transact_fn.test = oh_ledger_transact;\n    }, document.body);\n  }\n\n  return root.oh$;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (oh$);\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../node_modules/webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbGVkZ2Vycy5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL19fb2gkX18vLi9zcmMvbGVkZ2Vycy5qcz83N2ZlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBXZWIzIGZyb20gJ3dlYjMnO1xyXG5cclxuLy8gICAgIGxlZGdlcnMuanMgXHJcbi8vICAgICBodHRwczovL2xlZGdlci5vdmVyaGlkZS5pb1xyXG4vLyAgICAgKGMpIDIwMjEgT3ZlcmhpZGUgTExDLCBXeW9taW5nLCBVU0FcclxuLy8gICAgIGxlZGdlcnMuanMgbWF5IGJlIGZyZWVseSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXHJcblxyXG4vKipcclxuICogQG5hbWVzcGFjZSBvaCRcclxuICogQGRlc2NyaXB0aW9uIFxyXG4gKiBcclxuICogIyMjIyBSRUZFUkVOQ0VTXHJcbiAqIFxyXG4gKiBMaWJyYXJ5IGNvZGU6IGh0dHBzOi8vZ2l0aHViLmNvbS9vdmVyaGlkZS9sZWRnZXJzLmpzL2Jsb2IvbWFzdGVyL2Rpc3QvbGVkZ2Vycy5qcy5cclxuICpcclxuICogUmVwb3NpdG9yeSBmb3IgdGhpcyBsaWJyYXJ5IGlzIGh0dHBzOi8vZ2l0aHViLmNvbS9vdmVyaGlkZS9sZWRnZXJzLmpzLlxyXG4gKiBcclxuICogVGhlIHJlcG9zaXRvcnkgY29udGFpbnMgYSBkZW1vIGFwcCBvZiB0aGlzIGxpYnJhcnkgd29ya2luZyBpbiBjb25qdW5jdGlvbiB3aXRoIHRoZSAqb3ZlcmhpZGUqIEV0aGVyZXVtIHJlbXVuZXJhdGlvblxyXG4gKiBwcm92aWRlciAoUmlua2VieSB0ZXN0bmV0IC0tIGh0dHBzOi8vcmlua2VieS5ldGhlcmV1bS5vdmVyaGlkZS5pbykgYW5kIHRoZSAqb3ZlcmhpZGUtbGVkZ2VyKiAodGVzdCBlbnZpcm9ubWVudCAtLSBodHRwczovL3Rlc3QubGVkZ2VyLm92ZXJoaWRlLmlvKVxyXG4gKiBcclxuICogIyMjIyBBQk9VVFxyXG4gKiBcclxuICogSmF2YVNjcmlwdCBsaWJyYXJ5IHRvIGJlIHVzZWQgaW4tYnJvd3NlciBhbmQgaW50ZXJyb2dhdGUgKm92ZXJoaWRlKiByZW11bmVyYXRpb24gcHJvdmlkZXJzIGFzIHRvIHZhbGlkaXR5XHJcbiAqIG9mIGxlZGdlciBjcmVkZW50aWFscyBhbmQgdHJhbnNhY3Rpb25zIGludm9sdmluZyB0aGVzZSBjcmVkZW50aWFscy5cclxuICogXHJcbiAqIFRoZSBnb2FsIG9mIHRoZSBsaWJyYXJ5IGFuZCB0aGUgKm92ZXJoaWRlKiByZW11bmVyYXRpb24gcHJvdmlkZXJzIGlzIHRvIGVhc2UgdXNpbmcgb2YgYWxsIHR5cGVzIG9mIGxlZGdlcnMgZm9yXHJcbiAqIGF1dGhlbnRpY2F0aW9uIChJIGFtIHdobyBJIHNheSkgYW5kIGF1dGhvcml6YXRpb24gKHBhaWQgYWNjZXNzIHRpZXJzKS5cclxuICogXHJcbiAqIFRoZSBsaWJyYXJ5IGxldmVyYWdlcyBpbmplY3RlZCBjdXJyZW5jeSB3YWxsZXRzIHdoZXJlIGl0IGNhbiwgYW5kIGV4cG9zZXMgZnVuY3Rpb25zIHRvIHdvcmsgd2l0aCAqbG9vc2UqIGN1cnJlbmNpZXMgXHJcbiAqICh3aXRob3V0IHdhbGxldHMpIHdoZXJlIGl0IGNhbm5vdC5cclxuICogXHJcbiAqIFRoZSBsaWJyYXJ5IGV4cG9ydHMgdGhlIGBvaCRgIG9iamVjdCBmb3IgdXNlIGFzIGEgbW9kdWxlIHdoZW4gYnVuZGxpbmcuXHJcbiAqIFxyXG4gKiBgYGBcclxuICogaW1wb3J0IG9oJCBmcm9tIFwibGVkZ2Vycy5qc1wiO1xyXG4gKiBvaCQuZW5hYmxlKHRva2VuKTtcclxuICogb2gkLmFkZEV2ZW50TGlzdGVuZXIoJ29uV2FsbGV0Q2hhbmdlJywgKGUpID0+IHsuLi59KTtcclxuICogYGBgXHJcbiAqIFxyXG4gKiA+IEFQSXMgYWJzdHJhY3RlZCBieSAqbGVkZ2Vycy5qcyogcmVxdWlyZSBhIGJlYXJlci10b2tlbi4gIFRoZSBgdG9rZW5gIChhYm92ZSkgaXMgcGFzc2VkIGluIHRvIGBlbmFibGVgIHRoZSByZXN0IG9mIHRoZSBsaWJyYXJ5J3NcclxuICogPiBmdW5jdGlvbmFsaXR5LiAgYG9oJC5lbmFibGUoLi4pYCBjYW4gYmUgY2FsbGVkIGV2ZXJ5IHNvIG9mdGVuIHdpdGggYSByZWZyZXNoZWQgdG9rZW4uXHJcbiAqID5cclxuICogPiAgQSB0b2tlbiBjYW4gYmUgcmV0cmlldmVkIHdpdGggYSBgR0VUIC90b2tlbmAgY2FsbCAoc2VlIGh0dHBzOi8vdG9rZW4ub3ZlcmhpZGUuaW8vc3dhZ2dlci5odG1sKS5cclxuICogPlxyXG4gKiA+IFRvIHJldHJpZXZlIHRva2VucyBwbGVhc2UgZmlyc3QgcmVnaXN0ZXIgZm9yIHlvdXIgb3duIEFQSSBrZXkgYXQgaHR0cHM6Ly90b2tlbi5vdmVyaGlkZS5pby9yZWdpc3Rlci5cclxuICogXHJcbiAqIFRoZSBsaWJyYXJ5IGNhbiBiZSBsb2FkZWQgc3RyYWlnaHQgaW50byB5b3VyIEhUTUwgKGFsb25nIHdpdGggcHJlLXJlcXVpc2l0ZSBgd2ViMy5taW4uanNgKSBhbmQgYWNjZXNzZWQgYnkgaXRzIGBvaCRgIHByb3BlcnR5IGZyb20gdGhlIGJyb3dzZXIncyBgd2luZG93YCBvYmplY3Q6XHJcbiAqIFxyXG4gKiBgYGBcclxuICogPHNjcmlwdCBzcmM9XCJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy93ZWIzLzEuMy40L3dlYjMubWluLmpzXCIgaW50ZWdyaXR5PVwic2hhNTEyLVRUR0ltT0Rlc3pvZ2lybzlEVXZsZUM5TkpWbnhPNk0wKzY5bmJNM1lFOVNZY1ZlNHdacDJYWXBFTHRjaWt1RlpPOXZqWE5QeWVvSEFoUzVESHpYMVpRPT1cIiBjcm9zc29yaWdpbj1cImFub255bW91c1wiPjwvc2NyaXB0PlxyXG4gKiA8c2NyaXB0IHNyYz1cIi4vZGlzdC9sZWRnZXJzLmpzXCI+PC9zY3JpcHQ+XHJcbiAqIDxzY3JpcHQ+XHJcbiAqICAgb2gkLmVuYWJsZSh0b2tlbik7XHJcbiAqICAgb2gkLmFkZEV2ZW50TGlzdGVuZXIoJ29uV2FsbGV0Q2hhbmdlJywgKGUpID0+IHsuLi59KTtcclxuICogPC9zY3JpcHQ+XHJcbiAqIGBgYFxyXG4gKiBcclxuICogIyMjIyBJTVBBUlRFUlNcclxuICogXHJcbiAqIFRoZSBsaWJyYXJ5IHdvcmtzIHdpdGggYSBjb25jZXB0IG9mICppbXByYXRlciogdGFncy4gIFdhbGxldHMgaW1wYXJ0IGNyZWRlbnRpYWxzLCBzaWduYXR1cmVzLCBhbmQgdHJhbnNhY3Rpb25zLiAgRm9yXHJcbiAqICpsb29zZSBjaGFuZ2UqLS13aGVyZSBubyB3YWxsZXQgZXhpc3RzLS10aGUgbGlicmFyeSBjYW4gYmUgaW50ZXJyb2dhdGVkIGFzIHRvIHdoaWNoIGVudGl0aWVzIHNob3VsZCBiZSBzZXQgYnkgdGhlIFxyXG4gKiB1c2VyIChjYW4qIGZ1bmN0aW9ucyk7IGNhdXNpbmcgdGhlIGVudGl0aWVzIHRvIGJlIGltcGFydGVkIGJhY2sgdG8gdGhlIHVzZXIgaW4gYSBjb21tb24gY29kZSBmbG93LiAgXHJcbiAqIFxyXG4gKiBUaGUgaW1wYXJ0ZXIgdGFncyBhcmUgYSBzaW1wbGUgbmFtaW5nIGNvbnZlbnRpb24uICBGb3IgZXhhbXBsZSBpZiBtdWx0aXBsZSBFdGhlcmV1bSB3YWxsZXQgQVBJcyB3ZXJlIGltcGFydGluZyBkYXRhIFxyXG4gKiB0aGV5ICB3b3VsZCBiZSBpbmRpdmlkdWFsbHkgdGFnZ2VkIHdpdGggYSBwcmVmaXggXCJldGhcIiBhbmQgYSBkYXNoZWQgc3VmZml4LiAgTm8gc3VmZml4IGluZGljYXRlcyBhICpsb29zZSBjaGFuZ2UqXHJcbiAqIGltcGFydGVyOlxyXG4gKiBcclxuICogLSBldGgtd2ViM1xyXG4gKiAtIGV0aC0/XHJcbiAqIFxyXG4gKiBTaW1pbGFybHkgZm9yICpvdmVyaGlkZS1sZWRnZXIqLCB0aGUgcHJlZml4IGlzIFwib2hsZWRnZXJcIiwgdGhlIHN1ZmZpeCB3b24ndCBiZSBhdHRhY2hlZCBvbiB0aGUgKmxvb3NlIGNoYW5nZSogdmVyc2lvbiBcclxuICogYW5kIHdpbGwgYmUgc3VmZml4ZWQgb24gdGhlICp3ZWIzKiB3YWxsZXRlZCB2ZXJzaW9uOlxyXG4gKiBcclxuICogLSBvaGxlZGdlclxyXG4gKiAtIG9obGVkZ2VyLXdlYjNcclxuICogXHJcbiAqIFRoZSBmb2xsb3dpbmcgc2VjdGlvbnMgY292ZXIgc3BlY2lhbCBub3RlcyBvbiBlYWNoIGltcGFydGVyLiAgVGhlIGxpYnJhcnkgYWRoZXJlcyB0byB0aGVzZSBub3Rlcy5cclxuICogXHJcbiAqICMjIyMjIGV0aC13ZWIzXHJcbiAqIFxyXG4gKiBFdGhlcmV1bSBhZGRyZXNzZXMgYXJlIDIwIGJ5dGVzOiA0MiBjaGFyYWN0ZXIgJ2hleCcgc3RyaW5ncyBwcmVmaXhlZCB3aXRoICcweCcuXHJcbiAqIFxyXG4gKiBFdGhlcmV1bSBzZWNyZXQga2V5cyBmb3Igc2lnbmluZyBhZGRyZXNzZXMgYXJlIDMyIGJ5dGVzOiA2NiBjaGFyYWN0ZXIgJ2hleCcgc3RyaW5ncyBwcmVmaXhlZCB3aXRoICcweCcuXHJcbiAqIFxyXG4gKiBFdGhlcmV1bSBuZXR3b3JrcyBuYW1lcyBhcmU6XHJcbiAqIFxyXG4gKiAqIG1haW5cclxuICogKiBrb3ZhblxyXG4gKiAqIHJpbmtleWJ5XHJcbiAqICogcm9wc3RlblxyXG4gKiBcclxuICogVGhlIGRlbm9taW5hdGlvbiBmb3IgYW1vdW50cyBpcyB0aGUgV2VpXHJcbiAqIFxyXG4gKiAjIyMjIyBvaGxlZGdlciwgb2hsZWRnZXItd2ViM1xyXG4gKiBcclxuICogQWRkcmVzc2VzIGFuZCBzZWNyZXQga2V5cyB1c2UgRXRoZXJldW0gZm9ybWF0LlxyXG4gKiBcclxuICogQWRkcmVzc2VzIGFyZSAyMCBieXRlczogNDIgY2hhcmFjdGVyICdoZXgnIHN0cmluZ3MgcHJlZml4ZWQgd2l0aCAnMHgnLlxyXG4gKiBcclxuICogU2VjcmV0IGtleXMgZm9yIHNpZ25pbmcgYWRkcmVzc2VzIGFyZSAzMiBieXRlczogNjYgY2hhcmFjdGVyICdoZXgnIHN0cmluZ3MgcHJlZml4ZWQgd2l0aCAnMHgnLlxyXG4gKiBcclxuICogTmV0d29yayB0dXBsZXMgY29uc2lzdCBvZiBhICdjdXJyZW5jeScgYXMgYSB0aHJlZSBsZXR0ZXIgSVNPIGZpYXQgY3VycmVuY3kgY29kZSBhbmQgYSAnbW9kZScuICBUaGUgc3VwcG9ydGVkXHJcbiAqICdjdXJyZW5jeScgbmFtZXMgYXJlOlxyXG4gKiBcclxuICogKiAnVVNEJ1xyXG4gKiBcclxuICogVGhlIGRlbm9taW5hdGlvbnMgYXJlOlxyXG4gKiBcclxuICogfCBDdXJyZW5jeSB8IGRlbm9taW5hdGlvbiB8XHJcbiAqIHwgLS0tIHwgLS0tIHxcclxuICogfCBVU0QgfCBjZW50cyB8XHJcbiAqIFxyXG4gKiBOb3RlOiBhdCB0aGlzIHBvaW50IG9ubHkgVVNEIGFyZSBzdXBwb3J0ZWQuICBJZiB0aGVyZSBpcyBhIG5lZWQsIGFuZCAqb3ZlcmhpZGUtbGVkZ2VyKiBpbnN0YW5jZXMgaW4gY3VycmVuY2llc1xyXG4gKiBvdGhlciB0aGFuIFVTRCBjb21lIG9ubGluZSwgd2UnbGwgcmV2aXNpdCB0aGlzLlxyXG4gKlxyXG4gKiBBbiAnb2hsZWRnZXInIG1vZGUgaXMgb24gb2YgJ3Byb2QnIG9yICd0ZXN0J1xyXG4gKiBcclxuICovXHJcbmNvbnN0IG9oJCA9IChmdW5jdGlvbigpIHtcclxuXHJcbiAgdmFyIHJvb3QgPSB0eXBlb2Ygc2VsZiA9PSAnb2JqZWN0JyAmJiBzZWxmLnNlbGYgPT09IHNlbGYgJiYgc2VsZiB8fFxyXG4gICAgdHlwZW9mIGdsb2JhbCA9PSAnb2JqZWN0JyAmJiBnbG9iYWwuZ2xvYmFsID09PSBnbG9iYWwgJiYgZ2xvYmFsIHx8XHJcbiAgICB0aGlzIHx8XHJcbiAgICB7fTtcclxuXHJcbiAgcm9vdC5vaCQgPSBuZXcgY2xhc3MgZXh0ZW5kcyBFdmVudFRhcmdldCB7XHJcbiAgICAvKipcclxuICAgICAqIEBldmVudCBvbldhbGxldENoYW5nZVxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGV2ZW50IG9iamVjdCAtIHRoZSBldmVudCBvYmplY3QgcGFzc2VkIGluIHdpbGwgaGF2ZSBhZGRpdGlvbmFsIGF0dHJpYnV0ZXNcclxuICAgICAqXHJcbiAgICAgKiAgPiBUaGUgbmV3IGV2ZW50IG9iamVjdCB3aWxsIGNvbmZvcm0gdG8gdGhlIGZvbGxvd2luZzpcclxuICAgICAqICA+XHJcbiAgICAgKiAgPiB8IGltcGFydGVyIHRhZyB8IGV2ZW50IG9iamVjdCBhdHRyaWJ1dGVzIHxcclxuICAgICAqICA+IHwgLS0tIHwgLS0tIHxcclxuICAgICAqICA+IHwgKiB8IGB7aW1wYXJ0ZXJUYWc6Li4saXNQcmVzZW50Oi4ufWAgfFxyXG4gICAgICogID5cclxuICAgICAqICA+ICppbXBhcnRlclRhZyogLSBjYXVzaW5nIHRoZSBldmVudFxyXG4gICAgICogID5cclxuICAgICAqICA+ICppc1ByZXNlbnQqIC0gaWYgd2FsbGV0IGlzIHByZXNlbnQgZm9yIGltcGFydGVyXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiAgIEV2ZW50IGNhbGxlZCB3aGVuIHdhbGxldHMnIHN0YXRlIGNoYW5nZXMuXHJcbiAgICAgKiBcclxuICAgICAqICAgSW4gdXNlciBjb2RlOlxyXG4gICAgICogXHJcbiAgICAgKiAgIGBgYFxyXG4gICAgICogICBvaCQuYWRkRXZlbnRMaXN0ZW5lcignb25XYWxsZXRDaGFuZ2UnLCAoZSkgPT4gY29uc29sZS5sb2coYHdhbGxldCBmb3IgJHtlLmltcGFydGVyVGFnfSBpcyBhdmFpbGFibGU6JHtlLmlzUHJlc2VudH1gKSk7XHJcbiAgICAgKiAgIGBgYFxyXG4gICAgICovXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZXZlbnQgb25XYWxsZXRQb3B1cFxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGV2ZW50IG9iamVjdCAtIHRoZSBldmVudCBvYmplY3QgcGFzc2VkIGluIHdpbGwgaGF2ZSBhZGRpdGlvbmFsIGF0dHJpYnV0ZXNcclxuICAgICAqXHJcbiAgICAgKiAgPiBUaGUgbmV3IGV2ZW50IG9iamVjdCB3aWxsIGNvbmZvcm0gdG8gdGhlIGZvbGxvd2luZzpcclxuICAgICAqICA+XHJcbiAgICAgKiAgPiB8IGltcGFydGVyIHRhZyB8IGV2ZW50IG9iamVjdCBhdHRyaWJ1dGVzIHxcclxuICAgICAqICA+IHwgLS0tIHwgLS0tIHxcclxuICAgICAqICA+IHwgKiB8IGB7aW1wYXJ0ZXJUYWc6Li59YCB8XHJcbiAgICAgKiAgPlxyXG4gICAgICogID4gKmltcGFydGVyVGFnKiAtIGNhdXNpbmcgdGhlIHBvcC11cFxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogICBFdmVudCBjYWxsZWQgd2hlbiB3YWxsZXQgaXMgZXhwZWN0ZWQgdG8gcG9wdXAuICBVc2VmdWwgaW4gY2FzZSB1c2VyIHdhbnRzIHRvIHJlYWN0IHRvIHBvcHVwIGluIFVJLlxyXG4gICAgICogXHJcbiAgICAgKiAgIEluIHVzZXIgY29kZTpcclxuICAgICAqIFxyXG4gICAgICogICBgYGBcclxuICAgICAqICAgb2gkLmFkZEV2ZW50TGlzdGVuZXIoJ29uV2FsbGV0UG9wdXAnLCAoZSkgPT4gY29uc29sZS5sb2coYHdhbGxldCBmb3IgJHtlLmltcGFydGVyVGFnfSBwb3BwZWRgKSk7XHJcbiAgICAgKiAgIGBgYFxyXG4gICAgICovXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZXZlbnQgb25DcmVkZW50aWFsc1VwZGF0ZVxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiAgIEV2ZW50IGNhbGxlZCB3aGVuIGFuIGNyZWRlbnRpYWxzIGNoYW5nZSBmb3Igb25lIG9mIHRoZSB0cmFja2VkIGltcGFydGVycy5cclxuICAgICAqIFxyXG4gICAgICogICBPbmx5IGNhbGxlZCB3aGVuIGNyZWRlbnRpYWxzIGFyZSB2YWxpZCBhcyBwZXIgaW1wYXJ0ZXI6IHJlYWR5IHRvIGJlIHVzZWQgZm9yIHNpZ25pbmcsIHRyYW5zYWN0aW5nLlxyXG4gICAgICpcclxuICAgICAqICAgSW4gdXNlciBjb2RlOlxyXG4gICAgICpcclxuICAgICAqICAgYGBgXHJcbiAgICAgKiAgIG9oJC5hZGRFdmVudExpc3RlbmVyKCdvbkNyZWRlbnRpYWxzVXBkYXRlJywgKGUpID0+IHtcclxuICAgICAqICAgICBpZiAoZS5pbXBhcnRlclRhZyA9PT0gJ2V0aC13ZWIzJykgY29uc29sZS5sb2coYG5ldyBhZGRyZXNzIGZvciAke2UuaW1wYXJ0ZXJUYWd9IGlzOiR7ZS5hZGRyZXNzfWApO1xyXG4gICAgICogICAgIHJldHVybjtcclxuICAgICAqICAgfSk7XHJcbiAgICAgKiAgIGBgYFxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGV2ZW50IG9iamVjdCAtIHRoZSBldmVudCBvYmplY3QgcGFzc2VkIGluIHdpbGwgaGF2ZSBhZGRpdGlvbmFsIGF0dHJpYnV0ZXNcclxuICAgICAqIFxyXG4gICAgICogID4gVGhlIG5ldyBldmVudCBvYmplY3Qgd2lsbCBjb25mb3JtIHRvIHRoZSBmb2xsb3dpbmc6XHJcbiAgICAgKiAgPlxyXG4gICAgICogID4gfCBpbXBhcnRlciB0YWcgfCBldmVudCBvYmplY3QgYXR0cmlidXRlcyB8XHJcbiAgICAgKiAgPiB8IC0tLSB8IC0tLSB8XHJcbiAgICAgKiAgPiB8IGV0aC13ZWIzIHwgYHtpbXBhcnRlclRhZzouLixhZGRyZXNzOi4ufWAgfFxyXG4gICAgICogID4gfCBvaGxlZGdlciB8IGB7aW1wYXJ0ZXJUYWc6Li4sYWRkcmVzczouLixzZWNyZXQ6Li59YCB8XHJcbiAgICAgKiAgPiB8IG9obGVkZ2VyLXdlYjMgfCBge2ltcGFydGVyVGFnOi4uLGFkZHJlc3M6Li59YCB8XHJcbiAgICAgKiAgPlxyXG4gICAgICogID4gKmltcGFydGVyVGFnKiAtIGNhdXNpbmcgdGhlIGV2ZW50XHJcbiAgICAgKiAgPlxyXG4gICAgICogID4gKmFkZHJlc3MqIC0gbGVkZ2VyIHB1YmxpYyBhZGRyZXNzIG9mIGNyZWRlbnRpYWwgc2V0IGZvciBpbXBhcnRlclxyXG4gICAgICogID5cclxuICAgICAqICA+ICpzZWNyZXQqIC0gbGVkZ2VyIFBLSSBwcml2YXRlIHNlY3JldCBmb3IgY3JlZGVudGlhbCBzZXQgZm9yIGltcGFydGVyXHJcbiAgICAgKlxyXG4gICAgICovXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZXZlbnQgb25OZXR3b3JrQ2hhbmdlXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqICAgRXZlbnQgY2FsbGVkIHdoZW4gdGhlIG5ldHdvcmsgY2hhbmdlcyBmb3IgYSBwYXJ0aWN1bGFyIGltcGFydGVyIHRhZy5cclxuICAgICAqIFxyXG4gICAgICogICBGb3IgZXhhbXBsZSBmb3IgXCJldGhcIiB0aGUgbmV0d29yayBjb3VsZCBjaGFuZ2VkIGZyb20gXCJtYWluXCIgdG8gXCJyaW5rZWJ5XCIuICBcclxuICAgICAqIFxyXG4gICAgICogICBJbiB1c2VyIGNvZGU6XHJcbiAgICAgKlxyXG4gICAgICogICBgYGBcclxuICAgICAqICAgb2gkLmFkZEV2ZW50TGlzdGVuZXIoJ29uTmV0d29ya0NoYW5nZScsIChlKSA9PiB7XHJcbiAgICAgKiAgICAgaWYgKGUuaW1wYXJ0ZXJUYWcgPT09ICdldGgtd2ViMycpIGNvbnNvbGUubG9nKGBuZXcgbmV0d29yayBzZWxlY3RlZCBmb3IgJHtlLmltcGFydGVyVGFnfSBpczoke2UubmFtZX1gKTtcclxuICAgICAqICAgICBpZiAoZS5pbXBhcnRlclRhZyA9PT0gL29obGVkZ2VyLy50ZXN0KGUuaW1wYXJ0ZXJUYWcpKSBjb25zb2xlLmxvZyhgd29ya2luZyBpbiBjdXJyZW5jeTogJHtlLmN1cnJlbmN5fWApO1xyXG4gICAgICogICAgIHJldHVybjtcclxuICAgICAqICAgfSk7XHJcbiAgICAgKiAgIGBgYFxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGV2ZW50IG9iamVjdCAtIHRoZSBldmVudCBvYmplY3QgcGFzc2VkIGluIHdpbGwgaGF2ZSBhZGRpdGlvbmFsIGF0dHJpYnV0ZXNcclxuICAgICAqXHJcbiAgICAgKiAgPiBUaGUgbmV3IGNyZWRlbnRpYWxzIG9iamVjdCB3aWxsIGNvbmZvcm0gdG8gdGhlIGZvbGxvd2luZzpcclxuICAgICAqICA+XHJcbiAgICAgKiAgPiB8IGltcGFydGVyIHRhZyB8IGV2ZW50IG9iamVjdCBhdHRyaWJ1dGVzIHxcclxuICAgICAqICA+IHwgLS0tIHwgLS0tIHxcclxuICAgICAqICA+IHwgZXRoLXdlYjMgfCBge2ltcGFydGVyVGFnOi4uLG5hbWU6KCdtYWluJ3wncmlua2VieSd8J2tvdmFuJykuLiwgdXJpOi4ufWAgfFxyXG4gICAgICogID4gfCBvaGxlZGdlciB8IGB7aW1wYXJ0ZXJUYWc6Li4sY3VycmVuY3k6J1VTRCcsbW9kZTooJ3Byb2QnfCd0ZXN0JyksIHVyaTouLn1gIHxcclxuICAgICAqICA+IHwgb2hsZWRnZXItd2ViMyB8IGB7aW1wYXJ0ZXJUYWc6Li4sY3VycmVuY3k6J1VTRCcsbW9kZTooJ3Byb2QnfCd0ZXN0JyksIHVyaTouLn1gIHxcclxuICAgICAqICA+XHJcbiAgICAgKiAgPiAqaW1wYXJ0ZXJUYWcqIC0gY2F1c2luZyB0aGUgZXZlbnRcclxuICAgICAqICA+XHJcbiAgICAgKiAgPiAqbmFtZSogLSBvZiBuZXR3b3JrXHJcbiAgICAgKiAgPlxyXG4gICAgICogID4gKmN1cnJlbmN5KiAtIHJlcHJlc2VudGVkIGJ5IG5ldHdvcmtcclxuICAgICAqICA+XHJcbiAgICAgKiAgPiAqbW9kZSogLSBwcm9kdWN0aW9uIG9yIHRlc3QgbmV0d29ya1xyXG4gICAgICogID5cclxuICAgICAqICA+ICp1cmkqIC0gcmVtdW5lcmF0aW9uIEFQSSBVUkkgZm9yIG5ldHdvcmtcclxuICAgICAqXHJcbiAgICAgKi9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuYW1lc3BhY2Ugb2gkXHJcbiAgICAgKiBAZnVuY3Rpb24gZW5hYmxlXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqICAgRW5hYmxlIGBvaCRgIGJ5IGluc3RydW1lbnRpbmcgd2l0aCB0b2tlbiBmb3IgbGVkZ2VyIGFjY2Vzcy5cclxuICAgICAqIFxyXG4gICAgICogICBgb2gkYCBjYWxscyBtYXkgc3RhbGwgd2hpbGUgd2FpdGluZyBmb3IgdGhpcyBjYWxsIHRvIGNvbXBsZXRlIHN1Y2Nlc3NmdWxseS5cclxuICAgICAqIFxyXG4gICAgICogICBBIHRva2VuIGNhbiBiZSByZXRyaWV2ZWQgd2l0aCBhIGBHRVQgL3Rva2VuYCBjYWxsIChzZWUgaHR0cHM6Ly90b2tlbi5vdmVyaGlkZS5pby9zd2FnZ2VyLmh0bWwpLlxyXG4gICAgICogXHJcbiAgICAgKiAgIFRvIHJldHJpZXZlIHRva2VucyBwbGVhc2UgZmlyc3QgcmVnaXN0ZXIgZm9yIHlvdXIgb3duIEFQSSBrZXkgYXQgaHR0cHM6Ly90b2tlbi5vdmVyaGlkZS5pby9yZWdpc3Rlci5cclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0b2tlblxyXG4gICAgICovXHJcbiAgICBlbmFibGUgPSBlbmFibGU7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmFtZXNwYWNlIG9oJFxyXG4gICAgICogQGZ1bmN0aW9uIGdldEltcGFydGVyVGFnc1xyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiAgIFJldHJpZXZlcyBhbGwgaW1wYXJ0ZXIgdGFncyBpbmplY3RlZCBieSB3YWxsZXRzIGFuZCBzdGF0aWNhbGx5IGF2YWlsYWJsZSBmcm9tIHRoZSBsaWJyYXJ5LlxyXG4gICAgICogQHJldHVybnMge0FycmF5fSBvZiBzdHJpbmdzOiB0aGUgaW1wYXJ0ZXIgdGFncyBhdmFpbGFibGVcclxuICAgICAqL1xyXG4gICAgZ2V0SW1wYXJ0ZXJUYWdzID0gZ2V0SW1wYXJ0ZXJUYWdzO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5hbWVzcGFjZSBvaCRcclxuICAgICAqIEBmdW5jdGlvbiBjYW5TZXRDcmVkZW50aWFsc1xyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiAgIEludGVycm9nYXRlIHdoZXRoZXIgdGhlIGltcGFydGVyIHRhZyBjYW4gaGF2ZSBjcmVkZW50aWFscyBzZXQgYnkgdGhlIHVzZXI6IG9yIGRvZXMgdGhlIHdhbGxldCBjb250cm9sIGl0XHJcbiAgICAgKiAgIGV4Y2x1c2l2ZWx5LlxyXG4gICAgICogXHJcbiAgICAgKiAgIE9ubHkgdGhlIGZvbGxvd2luZyBpbXBhcnRlcihzKSB3aWxsIHJldHVybiAndHJ1ZSc6XHJcbiAgICAgKiBcclxuICAgICAqICAgLSBvaGxlZGdlclxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaW1wYXJ0ZXJUYWdcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSAndHJ1ZScgaWYgcGFydGljdWxhciBpbXBhcnRlciB0YWcgY2FuIGhhdmUgY3JlZGVudGlhbHMgc2V0LlxyXG4gICAgICovXHJcbiAgICBjYW5TZXRDcmVkZW50aWFscyA9IGNhblNldENyZWRlbnRpYWxzO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5hbWVzcGFjZSBvaCRcclxuICAgICAqIEBmdW5jdGlvbiBjYW5HZW5lcmF0ZUNyZWRlbnRpYWxzXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqICAgSW50ZXJyb2dhdGUgd2hldGhlciB0aGUgaW1wYXJ0ZXIgdGFnIGNhbiBoYXZlIGNyZWRlbnRpYWxzIGdlbmVyYXRlZCBieSB0aGUgdXNlcjogb3IgZG9lcyB0aGUgd2FsbGV0IGNvbnRyb2wgaXRcclxuICAgICAqICAgZXhjbHVzaXZlbHkuXHJcbiAgICAgKlxyXG4gICAgICogICBPbmx5IHRoZSBmb2xsb3dpbmcgaW1wYXJ0ZXIocykgd2lsbCByZXR1cm4gJ3RydWUnOlxyXG4gICAgICpcclxuICAgICAqICAgLSBvaGxlZGdlclxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpbXBhcnRlclRhZ1xyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59ICd0cnVlJyBpZiBwYXJ0aWN1bGFyIGltcGFydGVyIHRhZyBjYW4gaGF2ZSBjcmVkZW50aWFscyBnZW5lcmF0ZWQuXHJcbiAgICAgKi9cclxuICAgIGNhbkdlbmVyYXRlQ3JlZGVudGlhbHMgPSBjYW5HZW5lcmF0ZUNyZWRlbnRpYWxzO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5hbWVzcGFjZSBvaCRcclxuICAgICAqIEBmdW5jdGlvbiBjYW5DaGFuZ2VOZXR3b3JrXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqICAgSW50ZXJyb2dhdGUgd2hldGhlciB0aGUgaW1wYXJ0ZXIgdGFnIGNhbiBoYXZlIG5ldHdvcmsgY2hhbmdlZCBieSB0aGUgdXNlciB2aWEgb2gkOiBvciBkb2VzIHRoZSB3YWxsZXQgY29udHJvbCBpdFxyXG4gICAgICogICBleGNsdXNpdmVseS5cclxuICAgICAqXHJcbiAgICAgKiAgIE9ubHkgdGhlIGZvbGxvd2luZyBpbXBhcnRlcihzKSB3aWxsIHJldHVybiAndHJ1ZSc6XHJcbiAgICAgKlxyXG4gICAgICogICAtIG9obGVkZ2VyXHJcbiAgICAgKiAgIC0gb2hsZWRnZXItd2ViM1xyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpbXBhcnRlclRhZ1xyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59ICd0cnVlJyBpZiBwYXJ0aWN1bGFyIGltcGFydGVyIHRhZyBjYW4gaGF2ZSBuZXR3b3JrcyBjaGFuZ2VkIHZpYSBvaCQuXHJcbiAgICAgKi9cclxuICAgIGNhbkNoYW5nZU5ldHdvcmsgPSBjYW5DaGFuZ2VOZXR3b3JrO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5hbWVzcGFjZSBvaCRcclxuICAgICAqIEBmdW5jdGlvbiBnZW5lcmF0ZUNyZWRlbnRpYWxzXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqICAgRm9yIGltcGFydGVycyB0aGF0IGNhbiBoYXZlIGNyZWRlbnRpYWxzIGdlbmVyYXRlZCwgZ2VuZXJhdGVzIHRoZW0uICBcclxuICAgICAqIFxyXG4gICAgICogICBGaXJlcyBbb25DcmVkZW50aWFsc1VwZGF0ZV0oI2V2ZW50b25jcmVkZW50aWFsc3VwZGF0ZSkgZXZlbnQgYWdhaW5zdCBgb2gkYFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGltcGFydGVyVGFnXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIGltcGFydGVyIHNwZWNpZmljIGdlbmVyYXRpb24gb3B0aW9ucywgaWYgYW55LlxyXG4gICAgICogXHJcbiAgICAgKiAgPiBUaGUgb3B0aW9ucyBvYmplY3RzIGFyZSBhcyBmb2xsb3dzOlxyXG4gICAgICogID5cclxuICAgICAqICA+IHwgaW1wYXJ0ZXIgdGFnIHwgY3JlZGVudGlhbHMgb2JqZWN0IHxcclxuICAgICAqICA+IHwgLS0tIHwgLS0tIHxcclxuICAgICAqICA+IHwgZXRoLXdlYjMgfCBOL0EgfFxyXG4gICAgICogID4gfCBvaGxlZGdlciB8IG51bGwgfFxyXG4gICAgICogID4gfCBvaGxlZGdlci13ZWIzIHwgTi9BIHxcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gcmVwcmVzZW50aW5nIGEgJ3RydWUnIGlmIHN1Y2Nlc3MgZWxzZSAnZmFsc2UnOyBhbHNvIGZpcmVzIFtvbkNyZWRlbnRpYWxzVXBkYXRlXSgjZXZlbnRvbmNyZWRlbnRpYWxzdXBkYXRlKSBldmVudCBhZ2FpbnN0IGBvaCRgXHJcblxyXG4gICAgICovXHJcbiAgICBnZW5lcmF0ZUNyZWRlbnRpYWxzID0gZ2VuZXJhdGVDcmVkZW50aWFscztcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuYW1lc3BhY2Ugb2gkXHJcbiAgICAgKiBAZnVuY3Rpb24gc2V0Q3JlZGVudGlhbHNcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogICBGb3IgaW1wYXJ0ZXJzIHRoYXQgY2FuIGhhdmUgY3JlZGVudGlhbHMgc2V0LCBzZXRzIHRoZW0uICBcclxuICAgICAqIFxyXG4gICAgICogICBGaXJlcyBbb25DcmVkZW50aWFsc1VwZGF0ZV0oI2V2ZW50b25jcmVkZW50aWFsc3VwZGF0ZSkgZXZlbnQgYWdhaW5zdCBgb2gkYC5cclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpbXBhcnRlclRhZ1xyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGNyZWRlbnRpYWxzIC0gY3JlZGVudGlhbHMgb2JqZWN0IG9mIGltcGFydGVyIHNwZWNpZmljIHBhcmFtZXRlcnMgdG8gc2V0XHJcbiAgICAgKiBcclxuICAgICAqICA+IFRoZSBjcmVkZW50aWFscyBvYmplY3RzIGFyZSBhcyBmb2xsb3dzOlxyXG4gICAgICogID5cclxuICAgICAqICA+IHwgaW1wYXJ0ZXIgdGFnIHwgY3JlZGVudGlhbHMgb2JqZWN0IHwgY29tbWVudHMgfFxyXG4gICAgICogID4gfCAtLS0gfCAtLS0gfCAtLS0gfFxyXG4gICAgICogID4gfCBldGgtd2ViMyB8IE4vQSB8IHxcclxuICAgICAqICA+IHwgb2hsZWRnZXIgfCBge2FkZHJlc3M6Li4sc2VjcmV0Oi4ufWAgfCBgYWRkcmVzc2AgaXMgb3B0aW9uYWwsIGlmIG5vdCBzZXQgd2lsbCBiZSBleHRyYWN0ZWQgZnJvbSBgc2VjcmV0YCB8XHJcbiAgICAgKiAgPiB8IG9obGVkZ2VyLXdlYjMgfCBOL0EgfCB8XHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge1Byb21pc2V9IHJlcHJlc2VudGluZyBhICd0cnVlJyBpZiBzdWNjZXNzIGVsc2UgJ2ZhbHNlJzsgYWxzbyBmaXJlcyBbb25DcmVkZW50aWFsc1VwZGF0ZV0oI2V2ZW50b25jcmVkZW50aWFsc3VwZGF0ZSkgZXZlbnQgYWdhaW5zdCBgb2gkYFxyXG4gICAgICovXHJcbiAgICBzZXRDcmVkZW50aWFscyA9IHNldENyZWRlbnRpYWxzO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5hbWVzcGFjZSBvaCRcclxuICAgICAqIEBmdW5jdGlvbiBzZXROZXR3b3JrXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqICAgRm9yIGltcGFydGVycyB0aGF0IGNhbiBoYXZlIG5ldHdvcmtzIGNoYW5nZWQgdmlhIG9oJCwgY2hhbmdlcyBpdC4gIFxyXG4gICAgICogXHJcbiAgICAgKiAgIEZpcmVzIFtvbk5ldHdvcmtDaGFuZ2VdKCNldmVudG9ubmV0d29ya2NoYW5nZSkgZXZlbnQgYWdhaW5zdCBgb2gkYC5cclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpbXBhcnRlclRhZ1xyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRldGFpbHMgLSBuZXR3b3JrIGRldGFpbHMgb2JqZWN0IG9mIGltcGFydGVyIHNwZWNpZmljIHBhcmFtZXRlcnMgdG8gc2V0LlxyXG4gICAgICogXHJcbiAgICAgKiAgPiBUaGUgbmV0d29yayBkZXRhaWxzIG9iamVjdHMgYXJlIGFzIGZvbGxvd3M6XHJcbiAgICAgKiAgPlxyXG4gICAgICogID4gfCBpbXBhcnRlciB0YWcgfCBuZXR3b3JrIGRldGFpbHMgb2JqZWN0IHxcclxuICAgICAqICA+IHwgLS0tIHwgLS0tIHxcclxuICAgICAqICA+IHwgZXRoLXdlYjMgfCBOL0EgfFxyXG4gICAgICogID4gfCBvaGxlZGdlciB8IGB7Y3VycmVuY3k6J1VTRCcsIG1vZGU6J3Byb2QnfCd0ZXN0J31gIHxcclxuICAgICAqICA+IHwgb2hsZWRnZXItd2ViMyB8IGB7Y3VycmVuY3k6J1VTRCcsIG1vZGU6J3Byb2QnfCd0ZXN0J31gIHxcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gcmVwcmVzZW50aW5nIGEgJ3RydWUnIGlmIHN1Y2Nlc3MgZWxzZSAnZmFsc2UnOyBhbHNvIGZpcmVzIFtvbk5ldHdvcmtDaGFuZ2VdKCNldmVudG9ubmV0d29ya2NoYW5nZSkgZXZlbnQgYWdhaW5zdCBgb2gkYFxyXG4gICAgICovXHJcbiAgICBzZXROZXR3b3JrID0gc2V0TmV0d29yaztcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuYW1lc3BhY2Ugb2gkXHJcbiAgICAgKiBAZnVuY3Rpb24gZ2V0T3ZlcmhpZGVSZW11bmVyYXRpb25BUElVcmlcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogICBCYXNlZCBvbiBjdXJyZW50IG5ldHdvcmsgc2V0IHJldHVybnMgdGhlICpvdmVyaGlkZSogcmVtdW5lcmF0aW9uIEFQSSBVUkkgY29uZmlndXJlZCBpbiB0aGUgbGlicmFyeS5cclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpbXBhcnRlclRhZ1xyXG4gICAgICogQHJldHVybnMge3N0cmluZ30gdGhlIFVSSS5cclxuICAgICAqL1xyXG4gICAgZ2V0T3ZlcmhpZGVSZW11bmVyYXRpb25BUElVcmkgPSBnZXRPdmVyaGlkZVJlbXVuZXJhdGlvbkFQSVVyaTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuYW1lc3BhY2Ugb2gkXHJcbiAgICAgKiBAZnVuY3Rpb24gZ2V0Q3JlZGVudGlhbHNcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogICBSZXRyaWV2ZXMgY3VycmVudCBjcmVkZW50aWFscyBmb3IgYW4gaW1wYXJ0ZXJUYWcuXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaW1wYXJ0ZXJUYWdcclxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IGRldGFpbHMgLSBhbiBvYmplY3QgZGVzY3JpYmluZyBjdXJyZW50IGNyZWRlbnRpYWxzLCBpbXBhcnRlclRhZyBkZXBlbmRhbnQ6XHJcbiAgICAgKiBcclxuICAgICAqICA+IHwgaW1wYXJ0ZXIgdGFnIHwgY3JlZGVudGlhbHMgb2JqZWN0IHxcclxuICAgICAqICA+IHwgLS0tIHwgLS0tIHxcclxuICAgICAqICA+IHwgZXRoLXdlYjMgfCBge2FkZHJlc3M6Li59YCB8XHJcbiAgICAgKiAgPiB8IG9obGVkZ2VyIHwgYHthZGRyZXNzOi4uLHNlY3JldDouLn1gIHxcclxuICAgICAqICA+IHwgb2hsZWRnZXItd2ViMyB8IGB7YWRkcmVzczouLn1gIHxcclxuICAgICAqL1xyXG4gICAgZ2V0Q3JlZGVudGlhbHMgPSBnZXRDcmVkZW50aWFscztcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuYW1lc3BhY2Ugb2gkXHJcbiAgICAgKiBAZnVuY3Rpb24gZ2V0TmV0d29ya1xyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiAgIFJldHJpZXZlcyBjdXJyZW50IG5ldHdvcmsgZm9yIGFuIGltcGFydGVyVGFnLlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGltcGFydGVyVGFnXHJcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBkZXRhaWxzIC0gYW4gb2JqZWN0IGRlc2NyaWJpbmcgY3VycmVudCBuZXR3b3JrLCBpbXBhcnRlclRhZyBkZXBlbmRhbnQ6XHJcbiAgICAgKiBcclxuICAgICAqICA+IHwgaW1wYXJ0ZXIgdGFnIHwgbmV0d29yayBkZXRhaWxzIG9iamVjdCB8XHJcbiAgICAgKiAgPiB8IC0tLSB8IC0tLSB8XHJcbiAgICAgKiAgPiB8IGV0aC13ZWIzIHwgYHtuYW1lOignbWFpbid8J3JpbmtlYnknfCdrb3ZhbicpLi4sIHVyaTouLn1gIHxcclxuICAgICAqICA+IHwgb2hsZWRnZXIgfCBge2N1cnJlbmN5OidVU0QnLG1vZGU6KCdwcm9kJ3wndGVzdCcpLCB1cmk6Li59YCB8XHJcbiAgICAgKiAgPiB8IG9obGVkZ2VyLXdlYjMgfCBge2N1cnJlbmN5OidVU0QnLG1vZGU6KCdwcm9kJ3wndGVzdCcpLCB1cmk6Li59YCB8XHJcbiAgICAgKi9cclxuICAgIGdldE5ldHdvcmsgPSBnZXROZXR3b3JrO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5hbWVzcGFjZSBvaCRcclxuICAgICAqIEBmdW5jdGlvbiBnZXRGcm9tRG9sbGFyc1xyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiAgIFJldHJpZXZlIGEgY29udmVydGVkIGFtb3VudCBpbiBpbXBhcnRlciBzcGVjaWZpYyBkZW5vbWluYXRpb24gZnJvbSBhIHByb3ZpZGVkIGRvbGxhciBhbW91bnQuXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaW1wYXJ0ZXJUYWdcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkb2xsYXJBbW91bnQgLSB0aGUgZG9sbGFyIGFtb3VudC5cclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlfSB3aXRoIHRoZSB2YWx1ZSBpbiBpbXBhcnRlciBzcGVjaWZpYyBjdXJyZW5jeSBhdCB0aGUgcHJlc2VudCB0aW1lIChiYXNlZCBvbiByZWNlbnQgZXhjaGFuZ2UgcmF0ZSkuXHJcbiAgICAgKi9cclxuICAgICBnZXRGcm9tRG9sbGFycyA9IGdldEZyb21Eb2xsYXJzO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5hbWVzcGFjZSBvaCRcclxuICAgICAqIEBmdW5jdGlvbiBnZXRUYWxseURvbGxhcnNcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogICBSZXRyaWV2ZSBhIHRhbGx5IG9mIGFsbCB0cmFuc2FjdGlvbnMgb24gdGhlIGltcGFydGVyJ3MgbGVkZ2VyLS1wZXJoYXBzIHdpdGhpbiBhIGRhdGUgcmFuZ2UtLWNvbnZlcnRlZCB0byBhIFVTIGRvbGxhciBhbW91bnQuXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaW1wYXJ0ZXJUYWdcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSByZWNlcGllbnQgLSBpbXBhcnRlciBzcGVjaWZpYyBvYmplY3QgZGVzY3JpYmluZyByZWNpcGllbnQgb2YgdHJhbnNhY3Rpb25zIHRvIHRhbGx5IGZvci5cclxuICAgICAqXHJcbiAgICAgKiAgPiBSZWNpcGllbnQgb2JqZWN0cyBhcmUgYXMgcGVyOlxyXG4gICAgICogID5cclxuICAgICAqICA+IHwgaW1wYXJ0ZXIgdGFnIHwgcmVjaXBpZW50IG9iamVjdCB8XHJcbiAgICAgKiAgPiB8IC0tLSB8IC0tLSB8XHJcbiAgICAgKiAgPiB8IGV0aC13ZWIzIHwgYHthZGRyZXNzOi4ufWAgfFxyXG4gICAgICogID4gfCBvaGxlZGdlciB8IGB7YWRkcmVzczouLn1gIHxcclxuICAgICAqICA+IHwgb2hsZWRnZXItd2ViMyB8IGB7YWRkcmVzczouLn1gIHxcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0RhdGV9IHNpbmNlIC0gZGF0ZSB0byBzdGFydCB0YWxseSBzaW5jZTogZGF0ZSBvZiBvbGRlc3QgdHJhbnNhY3Rpb24gdG8gaW5jbHVkZS4gIE5vIHJlc3RyaWN0aW9uIGlmICdudWxsJy5cclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlfSB3aXRoIHRoZSB0YWxseSB2YWx1ZSBpbiBVUyBkb2xsYXJzOiBhbGwgdHJhbnNhY3Rpb25zIGFyZSBleGNoYW5nZWQgdG8gVVNEIGF0IGFuIGFwcHJveGltYXRlIGV4Y2hhbmdlIHJhdGVcclxuICAgICAqICAgY2xvc2UgdG8gdGhlIHRyYW5zYWN0aW9ucycgdGltZS5cclxuICAgICAqL1xyXG4gICAgIGdldFRhbGx5RG9sbGFycyA9IGdldFRhbGx5RG9sbGFycztcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuYW1lc3BhY2Ugb2gkXHJcbiAgICAgKiBAZnVuY3Rpb24gZ2V0VGFsbHlcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogICBSZXRyaWV2ZSBhIHRhbGx5IG9mIGFsbCB0cmFuc2FjdGlvbnMgb24gdGhlIGltcGFydGVyJ3MgbGVkZ2VyLS1wZXJoYXBzIHdpdGhpbiBhIGRhdGUgcmFuZ2UuXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaW1wYXJ0ZXJUYWdcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSByZWNlcGllbnQgLSBpbXBhcnRlciBzcGVjaWZpYyBvYmplY3QgZGVzY3JpYmluZyByZWNpcGllbnQgb2YgdHJhbnNhY3Rpb25zIHRvIHRhbGx5IGZvci5cclxuICAgICAqXHJcbiAgICAgKiAgPiBSZWNpcGllbnQgb2JqZWN0cyBhcmUgYXMgcGVyOlxyXG4gICAgICogID5cclxuICAgICAqICA+IHwgaW1wYXJ0ZXIgdGFnIHwgcmVjaXBpZW50IG9iamVjdCB8XHJcbiAgICAgKiAgPiB8IC0tLSB8IC0tLSB8XHJcbiAgICAgKiAgPiB8IGV0aC13ZWIzIHwgYHthZGRyZXNzOi4ufWAgfFxyXG4gICAgICogID4gfCBvaGxlZGdlciB8IGB7YWRkcmVzczouLn1gIHxcclxuICAgICAqICA+IHwgb2hsZWRnZXItd2ViMyB8IGB7YWRkcmVzczouLn1gIHxcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0RhdGV9IHNpbmNlIC0gZGF0ZSB0byBzdGFydCB0YWxseSBzaW5jZTogZGF0ZSBvZiBvbGRlc3QgdHJhbnNhY3Rpb24gdG8gaW5jbHVkZS4gIE5vIHJlc3RyaWN0aW9uIGlmICdudWxsJy5cclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlfSB3aXRoIHRoZSB0YWxseSB2YWx1ZSBpbiBpbXBhcnRlciBzcGVjaWZpYyBjdXJyZW5jeVxyXG4gICAgICovXHJcbiAgICBnZXRUYWxseSA9IGdldFRhbGx5O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5hbWVzcGFjZSBvaCRcclxuICAgICAqIEBmdW5jdGlvbiBnZXRUcmFuc2FjdGlvbnNcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogICBSZXRyaWV2ZSB0cmFuc2FjdGlvbnMgb24gdGhlIGltcGFydGVyJ3MgbGVkZ2VyLCBwZXJoYXBzIHdpdGhpbiBhIGRhdGUgcmFuZ2UsIGZyb20gY3JlZGVudGlhbHMgc2V0IGFnYWluc3QgXHJcbiAgICAgKiAgIGltcGFydGVyIHRvIGEgcmVjaXBpZW50XHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaW1wYXJ0ZXJUYWdcclxuICAgICAqIEBwYXJhbSB7RGF0ZX0gc2luY2UgLSBkYXRlIHRvIHN0YXJ0IHRhbGx5IHNpbmNlOiBkYXRlIG9mIG9sZGVzdCB0cmFuc2FjdGlvbiB0byBpbmNsdWRlLiAgTm8gcmVzdHJpY3Rpb24gaWYgJ251bGwnLlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHJlY2VwaWVudCAtIGltcGFydGVyIHNwZWNpZmljIG9iamVjdCBkZXNjcmliaW5nIHJlY2lwaWVudCBvZiB0cmFuc2FjdGlvbnMgdG8gdGFsbHkgZm9yLlxyXG4gICAgICpcclxuICAgICAqICA+IFJlY2lwaWVudCBvYmplY3RzIGFyZSBhcyBwZXI6XHJcbiAgICAgKiAgPlxyXG4gICAgICogID4gfCBpbXBhcnRlciB0YWcgfCByZWNpcGllbnQgb2JqZWN0IHxcclxuICAgICAqICA+IHwgLS0tIHwgLS0tIHxcclxuICAgICAqICA+IHwgZXRoLXdlYjMgfCBge2FkZHJlc3M6Li59YCB8XHJcbiAgICAgKiAgPiB8IG9obGVkZ2VyIHwgYHthZGRyZXNzOi4ufWAgfFxyXG4gICAgICogID4gfCBvaGxlZGdlci13ZWIzIHwgYHthZGRyZXNzOi4ufWAgfFxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlfSB3aXRoIHRoZSB0cmFuc2FjdGlvbnM6IGBbe1widHJhbnNhY3Rpb24tdmFsdWVcIjouLixcInRyYW5zYWN0aW9uLWRhdGVcIjouLn0sLi5dYFxyXG4gICAgICovXHJcbiAgICBnZXRUcmFuc2FjdGlvbnMgPSBnZXRUcmFuc2FjdGlvbnM7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmFtZXNwYWNlIG9oJFxyXG4gICAgICogQGZ1bmN0aW9uIGlzT25MZWRnZXJcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogICBEZXRlcm1pbmUgaWYgY3VycmVudCBjcmVkZW50aWFscyBoYXZlIHNvbWUgdHJhbnNhY3Rpb24gb24gdGhlIGltcGFydGVyJ3MgbGVkZ2VyOiB0cmFuc2FjdGlvbiBjYW4gYmUgdG8gYW55b25lLlxyXG4gICAgICogXHJcbiAgICAgKiAgIEludGVudCBpcyB0byB2YWxpZGF0ZSBiZXlvbmQganVzdCBhIHZhbGlkIGFkZHJlc3MuICBUbyB2YWxpZGF0ZSB0aGUgYWRkcmVzcyBoYXMgYmVlbiB1c2VkLlxyXG4gICAgICogXHJcbiAgICAgKiAgIE1heSBmaXJlIFtvbldhbGxldFBvcHVwXSgjZXZlbnRvbndhbGxldHBvcHVwKSBldmVudCBhZ2FpbnN0IGBvaCRgLlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGltcGFydGVyVGFnXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gd2l0aCAndHJ1ZScgb3IgJ2ZhbHNlJzsgbWF5IGZpcmUgW29uV2FsbGV0UG9wdXBdKCNldmVudG9ud2FsbGV0cG9wdXApIGV2ZW50IGFnYWluc3QgYG9oJGBcclxuICAgICAqL1xyXG4gICAgaXNPbkxlZGdlciA9IGlzT25MZWRnZXI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmFtZXNwYWNlIG9oJFxyXG4gICAgICogQGZ1bmN0aW9uIHNpZ25cclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogICBTaWduIHVzaW5nIHRoZSBwcm92aWRlZCBtZXNzYWdlIHVzaW5nIHRoZSBjcmVkZW50aWFscyBzZXQgYWdhaW5zdCB0aGUgc3BlY2lmaWMgaW1wYXJ0ZXIuXHJcbiAgICAgKiBcclxuICAgICAqICAgTm90ZTogd2FsbGV0IG1pZ2h0IHBvcCB1cCBhIGRpYWxvZyB1cG9uIHRoaXMgY2FsbCwgY29uc2lkZXIgdGhhdCBpbiB5b3VyIFVYIGZsb3cuXHJcbiAgICAgKiBcclxuICAgICAqICAgTWF5IGZpcmUgW29uV2FsbGV0UG9wdXBdKCNldmVudG9ud2FsbGV0cG9wdXApIGV2ZW50IGFnYWluc3QgYG9oJGAuXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaW1wYXJ0ZXJUYWdcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIC0gdG8gc2lnblxyXG4gICAgICogQHJldHVybnMge1Byb21pc2V9IHdpdGggdGhlIHNpZ25hdHVyZTsgbWF5IGZpcmUgW29uV2FsbGV0UG9wdXBdKCNldmVudG9ud2FsbGV0cG9wdXApIGV2ZW50IGFnYWluc3QgYG9oJGBcclxuICAgICAqL1xyXG4gICAgc2lnbiA9IHNpZ247XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmFtZXNwYWNlIG9oJFxyXG4gICAgICogQGZ1bmN0aW9uIGNyZWF0ZVRyYW5zYWN0aW9uXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqICAgQ3JlYXRlIGEgdHJhbnNhY3Rpb24gb24gdGhlIGltcGFydGVyJ3MgbGVkZ2VyLlxyXG4gICAgICogXHJcbiAgICAgKiAgIE1heSBmaXJlIFtvbldhbGxldFBvcHVwXSgjZXZlbnRvbndhbGxldHBvcHVwKSBldmVudCBhZ2FpbnN0IGBvaCRgOyB3YWxsZXQgbWlnaHQgcG9wIHVwIGEgZGlhbG9nIHVwb24gdGhpcyBjYWxsLCBjb25zaWRlciB0aGF0IGluIHlvdXIgVVggZmxvdy5cclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpbXBhcnRlclRhZ1xyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGFtb3VudFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRvIC0gYWRkcmVzcyBvZiByZWNpcGllbnRcclxuICAgICAqIFxyXG4gICAgICogID4gJDAgKCphbW91bnQqKSB0cmFuc2FjdGlvbnMgYWdhaW5zdCAqb2hsZWRnZXIqIG9yICpvaGxlZGdlci13ZWIqICppbXBhcnRlcnMqIHVzZSB0aGUgY3VycmVudCBjcmVkZW50aWFsIFxyXG4gICAgICogID4gYXMgdGhlICp0byogYWRkcmVzcywgbm90IHRoZSBzcGVjaWZpZWQgKnRvKiBhZGRyZXNzLlxyXG4gICAgICogIFxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBvdGhlciBvcHRpb25zIHJlcXVpcmVkIGZvciB0aGUgc3BlY2lmaWMgaW1wYXJ0ZXIuXHJcbiAgICAgKiBcclxuICAgICAqICA+IFRoZSBvcHRpb25zIG9iamVjdHMgYXJlIGFzIGZvbGxvd3M6XHJcbiAgICAgKiAgPiBcclxuICAgICAqICA+IHwgaW1wYXJ0ZXIgdGFnIHwgY3JlZGVudGlhbHMgb2JqZWN0IHxcclxuICAgICAqICA+IHwgLS0tIHwgLS0tIHxcclxuICAgICAqICA+IHwgZXRoLXdlYjMgfCBudWxsIHxcclxuICAgICAqICA+IHwgb2hsZWRnZXIgfCB7bWVzc2FnZTouLiwgc2lnbmF0dXJlOi4ufSB8XHJcbiAgICAgKiAgPiB8IG9obGVkZ2VyLXdlYjMgfCB7bWVzc2FnZTouLiwgc2lnbmF0dXJlOi4ufSB8XHJcbiAgICAgKiAgPiBcclxuICAgICAqICA+IElmICptZXNzYWdlKiBhbmQgKnNpZ25hdHVyZSogYXJlIHByb3ZpZGVkIHRoZXkgYXJlIHVzZWQgaW5zdGVhZCBvZiBvaCQgYXNraW5nIGZvciB3YWxsZXQgdG8gcmVzaWduIG1lc3NhZ2UuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge1Byb21pc2V9IG9mIGEgJ3RydWUnIGZvciBzdWNjZXNzIG9yIGFuIEVycm9yOyBtYXkgZmlyZSBbb25XYWxsZXRQb3B1cF0oI2V2ZW50b253YWxsZXRwb3B1cCkgZXZlbnQgYWdhaW5zdCBgb2gkYFxyXG4gICAgICovXHJcbiAgICBjcmVhdGVUcmFuc2FjdGlvbiA9IGNyZWF0ZVRyYW5zYWN0aW9uO1xyXG4gIH0oKTtcclxuXHJcbiAgY29uc3QgV0FMTEVUX0NIRUNLX0lOVEVSVkFMX01TID0gNTAwO1xyXG5cclxuICBjb25zdCBFVEhfV0VCM19JTVBBUlRFUl9UQUcgPSAnZXRoLXdlYjMnO1xyXG4gIGNvbnN0IE9ITEVER0VSX0lNUEFSVEVSX1RBRyA9ICdvaGxlZGdlcidcclxuICBjb25zdCBPSExFREdFUl9XRUIzX0lNUEFSVEVSX1RBRyA9ICdvaGxlZGdlci13ZWIzJ1xyXG5cclxuICB2YXIgZG9FbmFibGUgPSBudWxsO1xyXG4gIGNvbnN0IGlzRW5hYmxlZCA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBkb0VuYWJsZSA9IHJlc29sdmUpO1xyXG4gIHZhciB0b2tlbiA9IG51bGw7XHJcbiAgdmFyIF9fZmV0Y2ggPSBudWxsO1xyXG4gIHZhciBpbXBhcnRlclRhZ3MgPSBbT0hMRURHRVJfSU1QQVJURVJfVEFHXTtcclxuXHJcbiAgdmFyIGRhdGEgPSB7XHJcbiAgICBFVEhfV0VCM19JTVBBUlRFUl9UQUc6IHtcclxuICAgICAgd2FsbGV0QWRkcmVzczogbnVsbCxcclxuICAgICAgbmV0d29yazogbnVsbCxcclxuICAgICAgcmVtdW5lcmF0aW9uX3VyaToge1xyXG4gICAgICAgICdtYWluJzonaHR0cHM6Ly9ldGhlcmV1bS5vdmVyaGlkZS5pbycsXHJcbiAgICAgICAgJ3JpbmtlYnknOidodHRwczovL3JpbmtlYnkuZXRoZXJldW0ub3ZlcmhpZGUuaW8nXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBPSExFREdFUl9JTVBBUlRFUl9UQUc6IHtcclxuICAgICAgb2hfbGVkZ2VyX3RyYW5zYWN0X2ZuOiB7XHJcbiAgICAgICAgJ3Byb2QnOiBudWxsLFxyXG4gICAgICAgICd0ZXN0JzogbnVsbFxyXG4gICAgICB9LFxyXG4gICAgICBhZGRyZXNzOiBudWxsLFxyXG4gICAgICBzZWNyZXQ6IG51bGwsXHJcbiAgICAgIG1vZGU6ICd0ZXN0JyxcclxuICAgICAgcmVtdW5lcmF0aW9uX3VyaToge1xyXG4gICAgICAgICdwcm9kJzogJ2h0dHBzOi8vbGVkZ2VyLm92ZXJoaWRlLmlvL3YxJyxcclxuICAgICAgICAndGVzdCc6ICdodHRwczovL3Rlc3QubGVkZ2VyLm92ZXJoaWRlLmlvL3YxJ1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgT0hMRURHRVJfV0VCM19JTVBBUlRFUl9UQUc6IHtcclxuICAgICAgb2hfbGVkZ2VyX3RyYW5zYWN0X2ZuOiB7XHJcbiAgICAgICAgJ3Byb2QnOiBudWxsLFxyXG4gICAgICAgICd0ZXN0JzogbnVsbFxyXG4gICAgICB9LFxyXG4gICAgICB3YWxsZXRBZGRyZXNzOiBudWxsLFxyXG4gICAgICBtb2RlOiAndGVzdCcsXHJcbiAgICAgIHJlbXVuZXJhdGlvbl91cmk6IHtcclxuICAgICAgICAncHJvZCc6ICdodHRwczovL2xlZGdlci5vdmVyaGlkZS5pby92MScsXHJcbiAgICAgICAgJ3Rlc3QnOiAnaHR0cHM6Ly90ZXN0LmxlZGdlci5vdmVyaGlkZS5pby92MSdcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdmFyIGV0aF9hY2NvdW50cyA9IChuZXcgV2ViMygnaHR0cDovL2xvY2FsaG9zdDo4NTQ1JykpLmV0aC5hY2NvdW50cztcclxuXHJcbiAgY3JlYXRlUG9wdXAoKTtcclxuICBkZXRlY3RXZWIzV2FsbGV0KCk7XHJcblxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIGZpcmUgZXZlbnRzLlxyXG4gICAqIFxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB3aGljaCAtIGV2ZW50IG5hbWUgdG8gZmlyZVxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXMgLSB0byBjb3B5IHRvIGV2ZW50XHJcbiAgICovXHJcbiAgZnVuY3Rpb24gZmlyZSh3aGljaCwgcGFyYW1zKSB7XHJcbiAgICBsZXQgZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudChcIkV2ZW50XCIpO1xyXG4gICAgZXZlbnQuaW5pdEV2ZW50KHdoaWNoLCB0cnVlLCB0cnVlKTtcclxuICAgIGZvciAodmFyIHBhcmFtIGluIHBhcmFtcykge1xyXG4gICAgICBldmVudFtwYXJhbV0gPSBwYXJhbXNbcGFyYW1dO1xyXG4gICAgfVxyXG4gICAgb2gkLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0dXAgd2luZG93LndlYjMgdG8gYmUgdGhlIHdhbGxldCdzIGlmIGF2YWlsYWJsZSBvciBvZmZsaW5lIGlmIG5vdCAoanVzdCBmb3Igc2lnbmluZykuXHJcbiAgICogXHJcbiAgICogU2V0cyB1cCBhIHRpbWVyIHRvIGNoZWNrIGZvciB3YWxsZXQgYmVpbmcgbG9nZ2VkIGluIGFuZCBhZGRyZXNzIGNoYW5nZXMuXHJcbiAgICogXHJcbiAgICogQGlnbm9yZVxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIGRldGVjdFdlYjNXYWxsZXQoKSB7ICAgIFxyXG4gICAgaWYgKCF3aW5kb3cuZXRoZXJldW0pIHJldHVybjtcclxuIFxyXG4gICAgLy8gTW9kZXJuIGRhcHAgYnJvd3NlcnMuLi5cclxuICAgIChhc3luYyAoKSA9PiB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgd2luZG93LmV0aGVyZXVtLmVuYWJsZSgpO1xyXG4gICAgICAgIHdpbmRvdy53ZWIzID0gbmV3IFdlYjMod2luZG93LmV0aGVyZXVtKTtcclxuICAgICAgfSBjYXRjaCAoZSkgey8qbm9vcCovIH1cclxuXHJcbiAgICAgIGF3YWl0IGRldGVjdFdhbGxldENiKCk7XHJcblxyXG4gICAgICBzZXRJbnRlcnZhbChhc3luYyBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgYXdhaXQgZGV0ZWN0V2FsbGV0Q2IoKTtcclxuICAgICAgfSwgV0FMTEVUX0NIRUNLX0lOVEVSVkFMX01TKTtcclxuICAgIH0pKCk7XHJcblxyXG4gICAgdmFyIGRldGVjdFdhbGxldENiID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIHZhciBjdXJyZW50QWNjb3VudHMgPSBhd2FpdCB3aW5kb3cud2ViMy5ldGguZ2V0QWNjb3VudHMoKTtcclxuICAgICAgICB2YXIgY3VycmVudEFkZHJlc3MgPSAoY3VycmVudEFjY291bnRzICYmIGN1cnJlbnRBY2NvdW50cy5sZW5ndGggPiAwKSA/IGN1cnJlbnRBY2NvdW50c1swXSA6IG51bGw7XHJcbiAgICAgICAgdmFyIGN1cnJlbnROZXR3b3JrID0gKGF3YWl0IHdpbmRvdy53ZWIzLmV0aC5uZXQuZ2V0TmV0d29ya1R5cGUoKSk7XHJcbiAgICAgIH0gY2F0Y2ggKGUpIHsvKm5vb3AqL31cclxuICAgICAgaWYgKGN1cnJlbnROZXR3b3JrICE9PSBkYXRhLkVUSF9XRUIzX0lNUEFSVEVSX1RBRy5uZXR3b3JrKSB7XHJcbiAgICAgICAgZGF0YS5FVEhfV0VCM19JTVBBUlRFUl9UQUcubmV0d29yayA9IGN1cnJlbnROZXR3b3JrO1xyXG4gICAgICAgIGZpcmUoJ29uTmV0d29ya0NoYW5nZScse2ltcGFydGVyVGFnOiBFVEhfV0VCM19JTVBBUlRFUl9UQUcsIG5hbWU6Y3VycmVudE5ldHdvcmssIHVyaTogZGF0YS5FVEhfV0VCM19JTVBBUlRFUl9UQUcucmVtdW5lcmF0aW9uX3VyaVtjdXJyZW50TmV0d29ya119KTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoY3VycmVudEFkZHJlc3MgIT09IGRhdGEuRVRIX1dFQjNfSU1QQVJURVJfVEFHLndhbGxldEFkZHJlc3MpIHtcclxuICAgICAgICBpZiAoY3VycmVudEFkZHJlc3MpIHsgLyogYWRkIGltcGFydGVycyAqL1xyXG4gICAgICAgICAgbGV0IGltcGFydGVyVGFnSW5kZXggPSBpbXBhcnRlclRhZ3MuZmluZEluZGV4KHYgPT4gdiA9PT0gRVRIX1dFQjNfSU1QQVJURVJfVEFHKTtcclxuICAgICAgICAgIGlmIChpbXBhcnRlclRhZ0luZGV4ID09IC0xKSBpbXBhcnRlclRhZ3MucHVzaChFVEhfV0VCM19JTVBBUlRFUl9UQUcpO1xyXG4gICAgICAgICAgaW1wYXJ0ZXJUYWdJbmRleCA9IGltcGFydGVyVGFncy5maW5kSW5kZXgodiA9PiB2ID09PSBPSExFREdFUl9XRUIzX0lNUEFSVEVSX1RBRyk7XHJcbiAgICAgICAgICBpZiAoaW1wYXJ0ZXJUYWdJbmRleCA9PSAtMSkgaW1wYXJ0ZXJUYWdzLnB1c2goT0hMRURHRVJfV0VCM19JTVBBUlRFUl9UQUcpO1xyXG4gICAgICAgIH0gZWxzZSB7IC8qIHJlbW92ZSBpbXBhcnRlcnMgKi9cclxuICAgICAgICAgIGxldCBpbXBhcnRlclRhZ0luZGV4ID0gaW1wYXJ0ZXJUYWdzLmZpbmRJbmRleCh2ID0+IHYgPT09IEVUSF9XRUIzX0lNUEFSVEVSX1RBRyk7XHJcbiAgICAgICAgICBpZiAoaW1wYXJ0ZXJUYWdJbmRleCA+IC0xKSBpbXBhcnRlclRhZ3Muc3BsaWNlKGltcGFydGVyVGFnSW5kZXgsIDEpO1xyXG4gICAgICAgICAgaW1wYXJ0ZXJUYWdJbmRleCA9IGltcGFydGVyVGFncy5maW5kSW5kZXgodiA9PiB2ID09PSBPSExFREdFUl9XRUIzX0lNUEFSVEVSX1RBRyk7XHJcbiAgICAgICAgICBpZiAoaW1wYXJ0ZXJUYWdJbmRleCA+IC0xKSBpbXBhcnRlclRhZ3Muc3BsaWNlKGltcGFydGVyVGFnSW5kZXgsIDEpO1xyXG4gICAgICAgIH0gXHJcbiAgICAgICAgZGF0YS5FVEhfV0VCM19JTVBBUlRFUl9UQUcud2FsbGV0QWRkcmVzcyA9IGN1cnJlbnRBZGRyZXNzO1xyXG4gICAgICAgIGRhdGEuT0hMRURHRVJfV0VCM19JTVBBUlRFUl9UQUcud2FsbGV0QWRkcmVzcyA9IGN1cnJlbnRBZGRyZXNzO1xyXG4gICAgICAgIGZpcmUoJ29uV2FsbGV0Q2hhbmdlJywgeyBpbXBhcnRlclRhZzogRVRIX1dFQjNfSU1QQVJURVJfVEFHLCBpc1ByZXNlbnQ6ICEhY3VycmVudEFkZHJlc3MgfSk7XHJcbiAgICAgICAgZmlyZSgnb25XYWxsZXRDaGFuZ2UnLCB7IGltcGFydGVyVGFnOiBPSExFREdFUl9XRUIzX0lNUEFSVEVSX1RBRywgaXNQcmVzZW50OiAhIWN1cnJlbnRBZGRyZXNzIH0pO1xyXG4gICAgICAgIGlmIChjdXJyZW50QWRkcmVzcykge1xyXG4gICAgICAgICAgZmlyZSgnb25DcmVkZW50aWFsc1VwZGF0ZScsIHsgaW1wYXJ0ZXJUYWc6IEVUSF9XRUIzX0lNUEFSVEVSX1RBRywgYWRkcmVzczogY3VycmVudEFkZHJlc3MgfSk7XHJcbiAgICAgICAgICBmaXJlKCdvbkNyZWRlbnRpYWxzVXBkYXRlJywgeyBpbXBhcnRlclRhZzogT0hMRURHRVJfV0VCM19JTVBBUlRFUl9UQUcsIGFkZHJlc3M6IGN1cnJlbnRBZGRyZXNzIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0gXHJcblxyXG4gIGZ1bmN0aW9uIGVuYWJsZShfdG9rZW4sIHtmZXRjaGVyfSA9IHtmZXRjaGVyOiBmZXRjaH0pIHtcclxuICAgIHRva2VuID0gX3Rva2VuO1xyXG4gICAgX19mZXRjaCA9IGZldGNoZXI7XHJcbiAgICBkb0VuYWJsZSh0cnVlKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGdldEltcGFydGVyVGFncygpIHtcclxuICAgIHJldHVybiBpbXBhcnRlclRhZ3M7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjYW5TZXRDcmVkZW50aWFscyhpbXBhcnRlclRhZykge1xyXG4gICAgcmV0dXJuIGltcGFydGVyVGFnID09PSBPSExFREdFUl9JTVBBUlRFUl9UQUc7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjYW5HZW5lcmF0ZUNyZWRlbnRpYWxzKGltcGFydGVyVGFnKSB7XHJcbiAgICByZXR1cm4gaW1wYXJ0ZXJUYWcgPT09IE9ITEVER0VSX0lNUEFSVEVSX1RBRztcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNhbkNoYW5nZU5ldHdvcmsoaW1wYXJ0ZXJUYWcpIHtcclxuICAgIHN3aXRjaCAoaW1wYXJ0ZXJUYWcpIHtcclxuICAgICAgY2FzZSBPSExFREdFUl9JTVBBUlRFUl9UQUc6XHJcbiAgICAgIGNhc2UgT0hMRURHRVJfV0VCM19JTVBBUlRFUl9UQUc6XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZnVuY3Rpb24gc2V0Q3JlZGVudGlhbHMoaW1wYXJ0ZXJUYWcsIGNyZWRlbnRpYWxzKSB7XHJcbiAgICBzd2l0Y2ggKGltcGFydGVyVGFnKSB7XHJcbiAgICAgIGNhc2UgT0hMRURHRVJfSU1QQVJURVJfVEFHOlxyXG4gICAgICAgIGlmICghKCdzZWNyZXQnIGluIGNyZWRlbnRpYWxzKSkgdGhyb3cgbmV3IEVycm9yKFwiJ3NlY3JldCcgbXVzdCBiZSBwYXNzZWQgaW5cIik7XHJcbiAgICAgICAgaWYgKCdhZGRyZXNzJyBpbiBjcmVkZW50aWFscyAmJiBjcmVkZW50aWFscy5hZGRyZXNzKSB7XHJcbiAgICAgICAgICBkYXRhLk9ITEVER0VSX0lNUEFSVEVSX1RBRy5hZGRyZXNzID0gY3JlZGVudGlhbHMuYWRkcmVzcy50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBkYXRhLk9ITEVER0VSX0lNUEFSVEVSX1RBRy5hZGRyZXNzID0gZXRoX2FjY291bnRzLnByaXZhdGVLZXlUb0FjY291bnQoY3JlZGVudGlhbHMuc2VjcmV0KS5hZGRyZXNzLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRhdGEuT0hMRURHRVJfSU1QQVJURVJfVEFHLnNlY3JldCA9IGNyZWRlbnRpYWxzLnNlY3JldDtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgaWYgKCEoZXRoX2FjY291bnRzLnJlY292ZXIoZXRoX2FjY291bnRzLnNpZ24oJ3Rlc3QgbWVzc2FnZScsIGRhdGEuT0hMRURHRVJfSU1QQVJURVJfVEFHLnNlY3JldCkpLnRvTG93ZXJDYXNlKCkgPT0gZGF0YS5PSExFREdFUl9JTVBBUlRFUl9UQUcuYWRkcmVzcykpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiJ3NlY3JldCcgbm90IHZhbGlkIGZvciAnYWRkcmVzc1wiKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIidzZWNyZXQnIG5vdCB2YWxpZCBmb3IgJ2FkZHJlc3NcIik7XHJcbiAgICAgICAgfSAgICAgICAgXHJcbiAgICAgICAgZmlyZSgnb25DcmVkZW50aWFsc1VwZGF0ZScsIHsgaW1wYXJ0ZXJUYWc6IE9ITEVER0VSX0lNUEFSVEVSX1RBRywgYWRkcmVzczogZGF0YS5PSExFREdFUl9JTVBBUlRFUl9UQUcuYWRkcmVzcywgc2VjcmV0OiBkYXRhLk9ITEVER0VSX0lNUEFSVEVSX1RBRy5zZWNyZXR9KTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBnZXRDcmVkZW50aWFscyhpbXBhcnRlclRhZykge1xyXG4gICAgc3dpdGNoIChpbXBhcnRlclRhZykge1xyXG4gICAgICBjYXNlIE9ITEVER0VSX0lNUEFSVEVSX1RBRzogICAgICAgIFxyXG4gICAgICAgIHJldHVybiB7XCJhZGRyZXNzXCI6ZGF0YS5PSExFREdFUl9JTVBBUlRFUl9UQUcuYWRkcmVzcywgXCJzZWNyZXRcIjpkYXRhLk9ITEVER0VSX0lNUEFSVEVSX1RBRy5zZWNyZXR9O1xyXG4gICAgICBjYXNlIE9ITEVER0VSX1dFQjNfSU1QQVJURVJfVEFHOlxyXG4gICAgICAgIHJldHVybiB7XCJhZGRyZXNzXCI6ZGF0YS5PSExFREdFUl9XRUIzX0lNUEFSVEVSX1RBRy53YWxsZXRBZGRyZXNzfTtcclxuICAgICAgY2FzZSBFVEhfV0VCM19JTVBBUlRFUl9UQUc6XHJcbiAgICAgICAgcmV0dXJuIHtcImFkZHJlc3NcIjpkYXRhLkVUSF9XRUIzX0lNUEFSVEVSX1RBRy53YWxsZXRBZGRyZXNzfTtcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbnZhbGlkIGltcGFydGVyVGFnXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVDcmVkZW50aWFscyhpbXBhcnRlclRhZywgb3B0aW9ucykge1xyXG4gICAgc3dpdGNoIChpbXBhcnRlclRhZykge1xyXG4gICAgICBjYXNlIE9ITEVER0VSX0lNUEFSVEVSX1RBRzpcclxuICAgICAgICBsZXQgcmVzID0gZXRoX2FjY291bnRzLmNyZWF0ZSgpO1xyXG4gICAgICAgIGRhdGEuT0hMRURHRVJfSU1QQVJURVJfVEFHLmFkZHJlc3MgPSByZXMuYWRkcmVzcy50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIGRhdGEuT0hMRURHRVJfSU1QQVJURVJfVEFHLnNlY3JldCA9IHJlcy5wcml2YXRlS2V5O1xyXG4gICAgICAgIGZpcmUoJ29uQ3JlZGVudGlhbHNVcGRhdGUnLCB7IGltcGFydGVyVGFnOiBPSExFREdFUl9JTVBBUlRFUl9UQUcsIGFkZHJlc3M6IGRhdGEuT0hMRURHRVJfSU1QQVJURVJfVEFHLmFkZHJlc3MsIHNlY3JldDogZGF0YS5PSExFREdFUl9JTVBBUlRFUl9UQUcuc2VjcmV0fSk7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZnVuY3Rpb24gc2V0TmV0d29yayhpbXBhcnRlclRhZywgZGV0YWlscykge1xyXG4gICAgaWYgKEVUSF9XRUIzX0lNUEFSVEVSX1RBRyA9PSBpbXBhcnRlclRhZykgcmV0dXJuIGZhbHNlO1xyXG4gICAgaWYgKCEoJ2N1cnJlbmN5JyBpbiBkZXRhaWxzKSkgdGhyb3cgbmV3IEVycm9yKFwiJ2N1cnJlbmN5JyBtdXN0IGJlIHBhc3NlZCBpblwiKTtcclxuICAgIGlmICghKCdtb2RlJyBpbiBkZXRhaWxzKSkgdGhyb3cgbmV3IEVycm9yKFwiJ21vZGUnIG11c3QgYmUgcGFzc2VkIGluXCIpO1xyXG4gICAgZGV0YWlscy5jdXJyZW5jeSA9IGRldGFpbHMuY3VycmVuY3kudG9VcHBlckNhc2UoKTtcclxuICAgIGRldGFpbHMubW9kZSA9IGRldGFpbHMubW9kZS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgaWYgKGRldGFpbHMuY3VycmVuY3kgIT09ICdVU0QnKSB0aHJvdyBuZXcgRXJyb3IoXCInY3VycmVuY3knIG11c3QgYmUgJ1VTRCdcIik7XHJcbiAgICBpZiAoZGV0YWlscy5tb2RlICE9PSAncHJvZCcgJiYgZGV0YWlscy5tb2RlICE9PSAndGVzdCcpIHRocm93IG5ldyBFcnJvcihcIidtb2RlJyBtdXN0IGJlICdwcm9kJyBvciAndGVzdCdcIik7XHJcbiAgICBzd2l0Y2ggKGltcGFydGVyVGFnKSB7XHJcbiAgICAgIGNhc2UgT0hMRURHRVJfSU1QQVJURVJfVEFHOlxyXG4gICAgICAgIGRhdGEuT0hMRURHRVJfSU1QQVJURVJfVEFHLm1vZGUgPSBkZXRhaWxzLm1vZGU7XHJcbiAgICAgICAgZmlyZSgnb25OZXR3b3JrQ2hhbmdlJywgeyBpbXBhcnRlclRhZzogT0hMRURHRVJfSU1QQVJURVJfVEFHLCBjdXJyZW5jeTogJ1VTRCcsIG1vZGU6IGRldGFpbHMubW9kZSwgdXJpOiBkYXRhLk9ITEVER0VSX0lNUEFSVEVSX1RBRy5yZW11bmVyYXRpb25fdXJpW2RldGFpbHMubW9kZV19KTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgY2FzZSBPSExFREdFUl9XRUIzX0lNUEFSVEVSX1RBRzpcclxuICAgICAgICBkYXRhLk9ITEVER0VSX1dFQjNfSU1QQVJURVJfVEFHLm1vZGUgPSBkZXRhaWxzLm1vZGU7XHJcbiAgICAgICAgZmlyZSgnb25OZXR3b3JrQ2hhbmdlJywgeyBpbXBhcnRlclRhZzogT0hMRURHRVJfV0VCM19JTVBBUlRFUl9UQUcsIGN1cnJlbmN5OiAnVVNEJywgbW9kZTogZGV0YWlscy5tb2RlLCB1cmk6IGRhdGEuT0hMRURHRVJfV0VCM19JTVBBUlRFUl9UQUcucmVtdW5lcmF0aW9uX3VyaVtkZXRhaWxzLm1vZGVdIH0pO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGdldE5ldHdvcmsoaW1wYXJ0ZXJUYWcpIHtcclxuICAgIHN3aXRjaCAoaW1wYXJ0ZXJUYWcpIHtcclxuICAgICAgY2FzZSBPSExFREdFUl9JTVBBUlRFUl9UQUc6ICAgICAgICBcclxuICAgICAgICByZXR1cm4geyBcImN1cnJlbmN5XCI6IFwiVVNEXCIsIFwibW9kZVwiOiBkYXRhLk9ITEVER0VSX1dFQjNfSU1QQVJURVJfVEFHLm1vZGUsIFwidXJpXCI6IGRhdGEuT0hMRURHRVJfV0VCM19JTVBBUlRFUl9UQUcucmVtdW5lcmF0aW9uX3VyaVtkYXRhLk9ITEVER0VSX1dFQjNfSU1QQVJURVJfVEFHLm1vZGVdfTtcclxuICAgICAgY2FzZSBPSExFREdFUl9XRUIzX0lNUEFSVEVSX1RBRzpcclxuICAgICAgICByZXR1cm4geyBcImN1cnJlbmN5XCI6IFwiVVNEXCIsIFwibW9kZVwiOiBkYXRhLk9ITEVER0VSX0lNUEFSVEVSX1RBRy5tb2RlLCBcInVyaVwiOiBkYXRhLk9ITEVER0VSX0lNUEFSVEVSX1RBRy5yZW11bmVyYXRpb25fdXJpW2RhdGEuT0hMRURHRVJfSU1QQVJURVJfVEFHLm1vZGVdfTtcclxuICAgICAgY2FzZSBFVEhfV0VCM19JTVBBUlRFUl9UQUc6XHJcbiAgICAgICAgcmV0dXJuIHsgXCJuYW1lXCI6IGRhdGEuRVRIX1dFQjNfSU1QQVJURVJfVEFHLm5ldHdvcmssIFwidXJpXCI6IGRhdGEuRVRIX1dFQjNfSU1QQVJURVJfVEFHLnJlbXVuZXJhdGlvbl91cmlbZGF0YS5FVEhfV0VCM19JTVBBUlRFUl9UQUcubmV0d29ya119O1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcImludmFsaWQgaW1wYXJ0ZXJUYWdcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBnZXRPdmVyaGlkZVJlbXVuZXJhdGlvbkFQSVVyaShpbXBhcnRlclRhZykge1xyXG4gICAgc3dpdGNoIChpbXBhcnRlclRhZykge1xyXG4gICAgICBjYXNlIE9ITEVER0VSX0lNUEFSVEVSX1RBRzogICAgICAgIFxyXG4gICAgICAgIGlmICghZGF0YS5PSExFREdFUl9JTVBBUlRFUl9UQUcubW9kZSkgdGhyb3cgbmV3IEVycm9yKFwibmV0d29yayAnbW9kZScgbXVzdCBiZSBzZXQsIHVzZSBzZXROZXR3b3JrXCIpO1xyXG4gICAgICAgIHJldHVybiBkYXRhLk9ITEVER0VSX0lNUEFSVEVSX1RBRy5yZW11bmVyYXRpb25fdXJpW2RhdGEuT0hMRURHRVJfSU1QQVJURVJfVEFHLm1vZGVdO1xyXG4gICAgICBjYXNlIE9ITEVER0VSX1dFQjNfSU1QQVJURVJfVEFHOlxyXG4gICAgICAgIGlmICghZGF0YS5PSExFREdFUl9XRUIzX0lNUEFSVEVSX1RBRy5tb2RlKSB0aHJvdyBuZXcgRXJyb3IoXCJuZXR3b3JrICdtb2RlJyBtdXN0IGJlIHNldCwgdXNlIHNldE5ldHdvcmtcIik7XHJcbiAgICAgICAgcmV0dXJuIGRhdGEuT0hMRURHRVJfV0VCM19JTVBBUlRFUl9UQUcucmVtdW5lcmF0aW9uX3VyaVtkYXRhLk9ITEVER0VSX1dFQjNfSU1QQVJURVJfVEFHLm1vZGVdO1xyXG4gICAgICBjYXNlIEVUSF9XRUIzX0lNUEFSVEVSX1RBRzpcclxuICAgICAgICByZXR1cm4gZGF0YS5FVEhfV0VCM19JTVBBUlRFUl9UQUcucmVtdW5lcmF0aW9uX3VyaVtkYXRhLkVUSF9XRUIzX0lNUEFSVEVSX1RBRy5uZXR3b3JrXTsgICAgICBcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGZ1bmN0aW9uIGdldEZyb21Eb2xsYXJzKGltcGFydGVyVGFnLCBkb2xsYXJBbW91bnQpIHtcclxuICAgIHN3aXRjaCAoaW1wYXJ0ZXJUYWcpIHtcclxuICAgICAgY2FzZSBPSExFREdFUl9JTVBBUlRFUl9UQUc6ICAgICAgICBcclxuICAgICAgY2FzZSBPSExFREdFUl9XRUIzX0lNUEFSVEVSX1RBRzpcclxuICAgICAgICByZXR1cm4gZG9sbGFyQW1vdW50ICogMTAwO1xyXG4gICAgICBjYXNlIEVUSF9XRUIzX0lNUEFSVEVSX1RBRzpcclxuICAgICAgICBjb25zdCBob3N0UHJlZml4ID0gZGF0YS5FVEhfV0VCM19JTVBBUlRFUl9UQUcubmV0d29yayA9PT0gJ21haW4nID8gJycgOiAndGVzdC4nO1xyXG4gICAgICAgIGNvbnN0IG5vdyA9IChuZXcgRGF0ZSgpKS50b0lTT1N0cmluZygpO1xyXG4gICAgICAgIGlmIChhd2FpdCBpc0VuYWJsZWQgJiYgIV9fZmV0Y2gpIHRocm93IG5ldyBFcnJvcignZGlkIHlvdSBmb3JnZXQgdG8gYG9oJC5lbmFibGUoLi4pYD8nKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBfX2ZldGNoKGBodHRwczovLyR7aG9zdFByZWZpeH1yYXRlcy5vdmVyaGlkZS5pby9yYXRlcy9ldGgvJHtub3d9YCwge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh7XHJcbiAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dG9rZW59YFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxyXG4gICAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICB0aHJvdyBTdHJpbmcoZSlcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIGlmICghcmVzdWx0IHx8IHJlc3VsdC5sZW5ndGggPT09IDAgfHwgISAnbWlucmF0ZScgaW4gcmVzdWx0WzBdIHx8IHJlc3VsdFswXS5taW5yYXRlID09PSAwKSByZXR1cm4gMDtcclxuICAgICAgICByZXR1cm4gZG9sbGFyQW1vdW50IC8gcmVzdWx0WzBdLm1pbnJhdGU7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBmdW5jdGlvbiBnZXRUYWxseURvbGxhcnMoaW1wYXJ0ZXJUYWcsIHJlY2lwaWVudCwgZGF0ZSkge1xyXG4gICAgc3dpdGNoIChpbXBhcnRlclRhZykge1xyXG4gICAgICBjYXNlIE9ITEVER0VSX0lNUEFSVEVSX1RBRzogICAgICAgIFxyXG4gICAgICBjYXNlIE9ITEVER0VSX1dFQjNfSU1QQVJURVJfVEFHOlxyXG4gICAgICAgIHZhciB0YWxseSA9IGF3YWl0IGdldFRhbGx5KGltcGFydGVyVGFnLCByZWNpcGllbnQsIGRhdGUpO1xyXG4gICAgICAgIHJldHVybiAodGFsbHkgLyAxMDApLnRvRml4ZWQoMik7XHJcbiAgICAgIGNhc2UgRVRIX1dFQjNfSU1QQVJURVJfVEFHOlxyXG4gICAgICAgIGNvbnN0IHR4cyA9IGF3YWl0IGdldFRyYW5zYWN0aW9ucyhpbXBhcnRlclRhZywgcmVjaXBpZW50LCBkYXRlKTtcclxuICAgICAgICBpZiAoIXR4cyB8fCB0eHMubGVuZ3RoID09IDApIHJldHVybiAwO1xyXG4gICAgICAgIGNvbnN0IHZhbHVlcyA9IHR4cy5tYXAodCA9PiBgJHt0Wyd0cmFuc2FjdGlvbi12YWx1ZSddfUAkeyhuZXcgRGF0ZSh0Wyd0cmFuc2FjdGlvbi1kYXRlJ10pKS50b0lTT1N0cmluZygpfWApOyAgICAgICAgXHJcbiAgICAgICAgY29uc3QgaG9zdFByZWZpeCA9IGRhdGEuRVRIX1dFQjNfSU1QQVJURVJfVEFHLm5ldHdvcmsgPT09ICdtYWluJyA/ICcnIDogJ3Rlc3QuJztcclxuICAgICAgICBjb25zdCBub3cgPSAobmV3IERhdGUoKSkudG9JU09TdHJpbmcoKTtcclxuICAgICAgICBpZiAoYXdhaXQgaXNFbmFibGVkICYmICFfX2ZldGNoKSB0aHJvdyBuZXcgRXJyb3IoJ2RpZCB5b3UgZm9yZ2V0IHRvIGBvaCQuZW5hYmxlKC4uKWA/Jyk7XHJcbiAgICAgICAgdmFyIHRhbGx5ID0gYXdhaXQgX19mZXRjaChgaHR0cHM6Ly8ke2hvc3RQcmVmaXh9cmF0ZXMub3ZlcmhpZGUuaW8vdGFsbHltYXgvd2VpLyR7dmFsdWVzLmpvaW4oJywnKX1gLCB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IG5ldyBIZWFkZXJzKHtcclxuICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0b2tlbn1gXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLnRoZW4ocmVzID0+IHJlcy50ZXh0KCkpXHJcbiAgICAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICAgIHRocm93IFN0cmluZyhlKVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIChNYXRoLnJvdW5kKHRhbGx5ICogMTAwKSAvIDEwMCkudG9GaXhlZCgyKTtcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGZ1bmN0aW9uIGdldFRhbGx5KGltcGFydGVyVGFnLCByZWNpcGllbnQsIGRhdGUpIHtcclxuICAgIHJldHVybiAoYXdhaXQgZ2V0VHhzKGltcGFydGVyVGFnLCByZWNpcGllbnQsIGRhdGUsIHRydWUpKS50YWxseTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGZ1bmN0aW9uIGdldFRyYW5zYWN0aW9ucyhpbXBhcnRlclRhZywgcmVjaXBpZW50LCBkYXRlKSB7XHJcbiAgICByZXR1cm4gKGF3YWl0IGdldFR4cyhpbXBhcnRlclRhZywgcmVjaXBpZW50LCBkYXRlLCBmYWxzZSkpLnRyYW5zYWN0aW9ucztcclxuICB9XHJcblxyXG4gIGFzeW5jIGZ1bmN0aW9uIGdldFR4cyhpbXBhcnRlclRhZywgcmVjaXBpZW50LCBkYXRlLCB0YWxseU9ubHkpIHtcclxuICAgIGlmIChkYXRlICYmICEoZGF0ZSBpbnN0YW5jZW9mIERhdGUpKSB0aHJvdyBuZXcgRXJyb3IoXCInZGF0ZScgbXVzdCBiZSBhIERhdGUgaXMgcGFzc2VkIGluXCIpO1xyXG4gICAgaWYgKCEoJ2FkZHJlc3MnIGluIHJlY2lwaWVudCkgfHwgIXJlY2lwaWVudC5hZGRyZXNzKSB0aHJvdyBuZXcgRXJyb3IoXCInYWRkcmVzcycgcmVxdWlyZWQgaW4gcmVjaXBpZW50XCIpO1xyXG4gICAgbGV0IHRvID0gcmVjaXBpZW50LmFkZHJlc3M7XHJcbiAgICBsZXQgdXJpID0gZ2V0T3ZlcmhpZGVSZW11bmVyYXRpb25BUElVcmkoaW1wYXJ0ZXJUYWcpO1xyXG4gICAgc3dpdGNoIChpbXBhcnRlclRhZykge1xyXG4gICAgICBjYXNlIE9ITEVER0VSX0lNUEFSVEVSX1RBRzpcclxuICAgICAgICBpZiAoIWRhdGEuT0hMRURHRVJfSU1QQVJURVJfVEFHLm1vZGUpIHRocm93IG5ldyBFcnJvcihcIm5ldHdvcmsgJ21vZGUnIG11c3QgYmUgc2V0LCB1c2Ugc2V0TmV0d29ya1wiKTtcclxuICAgICAgICBpZiAoIWRhdGEuT0hMRURHRVJfSU1QQVJURVJfVEFHLmFkZHJlc3MpIHRocm93IG5ldyBFcnJvcihcImZyb20gJ2FkZHJlc3MnIG5vdCBzZXQ6IHVzZSBzZXRDcmVkZW50aWFsc1wiKTtcclxuICAgICAgICB2YXIgZnJvbSA9IGRhdGEuT0hMRURHRVJfSU1QQVJURVJfVEFHLmFkZHJlc3M7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgT0hMRURHRVJfV0VCM19JTVBBUlRFUl9UQUc6XHJcbiAgICAgICAgaWYgKCFkYXRhLk9ITEVER0VSX1dFQjNfSU1QQVJURVJfVEFHLm1vZGUpIHRocm93IG5ldyBFcnJvcihcIm5ldHdvcmsgJ21vZGUnIG11c3QgYmUgc2V0LCB1c2Ugc2V0TmV0d29ya1wiKTtcclxuICAgICAgICBpZiAoIWRhdGEuT0hMRURHRVJfV0VCM19JTVBBUlRFUl9UQUcud2FsbGV0QWRkcmVzcykgdGhyb3cgbmV3IEVycm9yKFwiZnJvbSAnd2FsbGV0QWRkcmVzcycgbm90IHNldDogdXNlIHdhbGxldFwiKTtcclxuICAgICAgICB2YXIgZnJvbSA9IGRhdGEuT0hMRURHRVJfV0VCM19JTVBBUlRFUl9UQUcud2FsbGV0QWRkcmVzcztcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBFVEhfV0VCM19JTVBBUlRFUl9UQUc6XHJcbiAgICAgICAgaWYgKCFkYXRhLkVUSF9XRUIzX0lNUEFSVEVSX1RBRy5uZXR3b3JrKSB0aHJvdyBuZXcgRXJyb3IoXCJubyBuZXR3b3JrIGZvciBpbXBhcnRlciB0YWdcIik7XHJcbiAgICAgICAgaWYgKCFkYXRhLkVUSF9XRUIzX0lNUEFSVEVSX1RBRy53YWxsZXRBZGRyZXNzKSB0aHJvdyBuZXcgRXJyb3IoXCJmcm9tICd3YWxsZXRBZGRyZXNzJyBub3Qgc2V0OiB1c2Ugd2FsbGV0XCIpO1xyXG4gICAgICAgIHZhciBmcm9tID0gZGF0YS5FVEhfV0VCM19JTVBBUlRFUl9UQUcud2FsbGV0QWRkcmVzcztcclxuICAgICAgICBicmVhaztcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Vuc3VwcG9ydGVkIGltcGFydGVyIHRhZycpO1xyXG4gICAgfVxyXG4gICAgaWYgKCF1cmkpIHRocm93IG5ldyBFcnJvcignbm8gdXJpIGZvciByZXF1ZXN0LCB1bnN1cHBvcnRlZCBuZXR3b3JrIHNlbGVjdGVkIGluIHdhbGxldD8nKTtcclxuICAgIGxldCBzaW5jZSA9ICcnO1xyXG4gICAgaWYgKGRhdGUpIHtcclxuICAgICAgc2luY2UgPSBgJnNpbmNlPSR7ZGF0ZS50b0lTT1N0cmluZygpfWA7XHJcbiAgICB9XHJcbiAgICBpZiAoYXdhaXQgaXNFbmFibGVkICYmICFfX2ZldGNoKSB0aHJvdyBuZXcgRXJyb3IoJ2RpZCB5b3UgZm9yZ2V0IHRvIGBvaCQuZW5hYmxlKC4uKWA/Jyk7XHJcbiAgICByZXR1cm4gYXdhaXQgX19mZXRjaChgJHt1cml9L2dldC10cmFuc2FjdGlvbnMvJHtmcm9tfS8ke3RvfT90YWxseS1vbmx5PSR7dGFsbHlPbmx5ID8gJ3RydWUnIDogJ2ZhbHNlJ30ke3NpbmNlfSZpbmNsdWRlLXJlZnVuZHM9dHJ1ZWAsIHtcclxuICAgICAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh7XHJcbiAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0b2tlbn1gXHJcbiAgICAgICAgfSlcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpXHJcbiAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICB0aHJvdyBTdHJpbmcoZSlcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyByYWlzZSBvaCQtZXZlbnRcclxuICAvLyBAcGFyYW0ge3N0cmluZ30gaW1wYXJ0ZXJUYWdcclxuICAvLyBAcGFyYW0ge3N0cmluZ30gdHJpZ2dlckZvciBcclxuICAvLyBAcGFyYW0ge09iamVjdH0gZGF0YSAtIHRvIHN0cmluZ2lmeSBhbmQgc2VudCBhcyBldmVudC5kZXRhaWxzLlxyXG4gIGZ1bmN0aW9uIHJhaXNlRXZlbnRDbGljayhpbXBhcnRlclRhZywgdHJpZ2dlckZvcikge1xyXG4gICAgd2luZG93LnBhcmVudC5kb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnb2gkLWV2ZW50Jywge2RldGFpbDogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICBpbXBhcnRlclRhZzogaW1wYXJ0ZXJUYWcsXHJcbiAgICAgIHRyaWdnZXJGb3I6IHRyaWdnZXJGb3IsXHJcbiAgICAgIGNsaWNrOiB0cnVlXHJcbiAgICB9KX0pKTtcclxuICB9XHJcblxyXG4gIC8vIHJhaXNlIG9oJC1ldmVudFxyXG4gIC8vIEBwYXJhbSB7c3RyaW5nfSBpbXBhcnRlclRhZ1xyXG4gIC8vIEBwYXJhbSB7c3RyaW5nfSB0cmlnZ2VyRm9yIFxyXG4gIC8vIEBwYXJhbSB7T2JqZWN0fSBkYXRhIC0gdG8gc3RyaW5naWZ5IGFuZCBzZW50IGFzIGV2ZW50LmRldGFpbHMuXHJcbiAgZnVuY3Rpb24gcmFpc2VFdmVudChpbXBhcnRlclRhZywgdHJpZ2dlckZvciwgZGF0YSkge1xyXG4gICAgd2luZG93LnBhcmVudC5kb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnb2gkLWV2ZW50Jywge2RldGFpbDogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAuLi5kYXRhLFxyXG4gICAgICBpbXBhcnRlclRhZzogaW1wYXJ0ZXJUYWcsXHJcbiAgICAgIHRyaWdnZXJGb3I6IHRyaWdnZXJGb3JcclxuICAgIH0pfSkpOyAgICBcclxuICB9XHJcblxyXG4gIGFzeW5jIGZ1bmN0aW9uIGlzT25MZWRnZXIoaW1wYXJ0ZXJUYWcpIHtcclxuICAgIGxldCB1cmkgPSBnZXRPdmVyaGlkZVJlbXVuZXJhdGlvbkFQSVVyaShpbXBhcnRlclRhZyk7XHJcbiAgICBzd2l0Y2ggKGltcGFydGVyVGFnKSB7XHJcbiAgICAgIGNhc2UgT0hMRURHRVJfSU1QQVJURVJfVEFHOlxyXG4gICAgICAgIGlmICghZGF0YS5PSExFREdFUl9JTVBBUlRFUl9UQUcubW9kZSkgdGhyb3cgbmV3IEVycm9yKFwibmV0d29yayAnbW9kZScgbXVzdCBiZSBzZXQsIHVzZSBzZXROZXR3b3JrXCIpO1xyXG4gICAgICAgIGlmICghZGF0YS5PSExFREdFUl9JTVBBUlRFUl9UQUcuYWRkcmVzcykgdGhyb3cgbmV3IEVycm9yKFwiZnJvbSAnYWRkcmVzcycgbm90IHNldDogdXNlIHNldENyZWRlbnRpYWxzXCIpO1xyXG4gICAgICAgIHZhciBmcm9tID0gZGF0YS5PSExFREdFUl9JTVBBUlRFUl9UQUcuYWRkcmVzcztcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBPSExFREdFUl9XRUIzX0lNUEFSVEVSX1RBRzpcclxuICAgICAgICBpZiAoIWRhdGEuT0hMRURHRVJfV0VCM19JTVBBUlRFUl9UQUcubW9kZSkgdGhyb3cgbmV3IEVycm9yKFwibmV0d29yayAnbW9kZScgbXVzdCBiZSBzZXQsIHVzZSBzZXROZXR3b3JrXCIpO1xyXG4gICAgICAgIGlmICghZGF0YS5PSExFREdFUl9XRUIzX0lNUEFSVEVSX1RBRy53YWxsZXRBZGRyZXNzKSB0aHJvdyBuZXcgRXJyb3IoXCJmcm9tICd3YWxsZXRBZGRyZXNzJyBub3Qgc2V0OiB1c2Ugd2FsbGV0XCIpO1xyXG4gICAgICAgIHZhciBmcm9tID0gZGF0YS5PSExFREdFUl9XRUIzX0lNUEFSVEVSX1RBRy53YWxsZXRBZGRyZXNzO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIEVUSF9XRUIzX0lNUEFSVEVSX1RBRzpcclxuICAgICAgICBpZiAoIWRhdGEuRVRIX1dFQjNfSU1QQVJURVJfVEFHLm5ldHdvcmspIHRocm93IG5ldyBFcnJvcihcIm5vIG5ldHdvcmsgZm9yIGltcGFydGVyIHRhZ1wiKTtcclxuICAgICAgICBpZiAoIWRhdGEuRVRIX1dFQjNfSU1QQVJURVJfVEFHLndhbGxldEFkZHJlc3MpIHRocm93IG5ldyBFcnJvcihcImZyb20gJ3dhbGxldEFkZHJlc3MnIG5vdCBzZXQ6IHVzZSB3YWxsZXRcIik7XHJcbiAgICAgICAgdmFyIGZyb20gPSBkYXRhLkVUSF9XRUIzX0lNUEFSVEVSX1RBRy53YWxsZXRBZGRyZXNzO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcigndW5zdXBwb3J0ZWQgaW1wYXJ0ZXIgdGFnJyk7XHJcbiAgICB9XHJcbiAgICBpZiAoIXVyaSkgdGhyb3cgbmV3IEVycm9yKCdubyB1cmkgZm9yIHJlcXVlc3QsIHVuc3VwcG9ydGVkIG5ldHdvcmsgc2VsZWN0ZWQgaW4gd2FsbGV0PycpO1xyXG4gICAgbGV0IG1lc3NhZ2UgPSAndmVyaWZ5IG93bmVyc2hpcCBvZiBhZGRyZXNzIGJ5IHNpZ25pbmcnO1xyXG4gICAgbGV0IHNpZ25hdHVyZSA9IGF3YWl0IHNpZ24oaW1wYXJ0ZXJUYWcsIG1lc3NhZ2UpO1xyXG4gICAgaWYgKGF3YWl0IGlzRW5hYmxlZCAmJiAhX19mZXRjaCkgdGhyb3cgbmV3IEVycm9yKCdkaWQgeW91IGZvcmdldCB0byBgb2gkLmVuYWJsZSguLilgPycpO1xyXG4gICAgcmV0dXJuIGF3YWl0IF9fZmV0Y2goYCR7dXJpfS9pcy1zaWduYXR1cmUtdmFsaWRgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHsgXHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcclxuICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0b2tlbn1gXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBzaWduYXR1cmU6IGJ0b2Eoc2lnbmF0dXJlKSxcclxuICAgICAgICBtZXNzYWdlOiBidG9hKG1lc3NhZ2UpLFxyXG4gICAgICAgIGFkZHJlc3M6IGZyb21cclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcclxuICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PSAyMDApIHtcclxuICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgdGhyb3cgU3RyaW5nKGUpXHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZnVuY3Rpb24gc2lnbihpbXBhcnRlclRhZywgbWVzc2FnZSkge1xyXG4gICAgc3dpdGNoIChpbXBhcnRlclRhZykge1xyXG4gICAgICBjYXNlIE9ITEVER0VSX0lNUEFSVEVSX1RBRzpcclxuICAgICAgICBpZiAoIWRhdGEuT0hMRURHRVJfSU1QQVJURVJfVEFHLnNlY3JldCkgdGhyb3cgbmV3IEVycm9yKGBjcmVkZW50aWFscyBmb3IgaW1wYXJ0ZXIgJHtPSExFREdFUl9JTVBBUlRFUl9UQUd9IG5vdCBzZXRgKTtcclxuICAgICAgICByZXR1cm4gZXRoX2FjY291bnRzLnNpZ24obWVzc2FnZSwgZGF0YS5PSExFREdFUl9JTVBBUlRFUl9UQUcuc2VjcmV0KS5zaWduYXR1cmU7XHJcbiAgICAgIGNhc2UgT0hMRURHRVJfV0VCM19JTVBBUlRFUl9UQUc6XHJcbiAgICAgICAgaWYgKCFkYXRhLk9ITEVER0VSX1dFQjNfSU1QQVJURVJfVEFHLndhbGxldEFkZHJlc3MpIHRocm93IG5ldyBFcnJvcihgaW1wYXJ0ZXIgJHtPSExFREdFUl9XRUIzX0lNUEFSVEVSX1RBR30gbm90IGFjdGl2ZWApO1xyXG4gICAgICAgIGZpcmUoJ29uV2FsbGV0UG9wdXAnLCB7aW1wYXJ0ZXJUYWc6IE9ITEVER0VSX1dFQjNfSU1QQVJURVJfVEFHfSk7XHJcbiAgICAgICAgcmV0dXJuIChhd2FpdCB3aW5kb3cud2ViMy5ldGgucGVyc29uYWwuc2lnbihtZXNzYWdlLCBkYXRhLk9ITEVER0VSX1dFQjNfSU1QQVJURVJfVEFHLndhbGxldEFkZHJlc3MsICcnKSk7XHJcbiAgICAgIGNhc2UgRVRIX1dFQjNfSU1QQVJURVJfVEFHOlxyXG4gICAgICAgIGlmICghZGF0YS5FVEhfV0VCM19JTVBBUlRFUl9UQUcud2FsbGV0QWRkcmVzcykgdGhyb3cgbmV3IEVycm9yKGBpbXBhcnRlciAke0VUSF9XRUIzX0lNUEFSVEVSX1RBR30gbm90IGFjdGl2ZWApO1xyXG4gICAgICAgIGZpcmUoJ29uV2FsbGV0UG9wdXAnLCB7aW1wYXJ0ZXJUYWc6IEVUSF9XRUIzX0lNUEFSVEVSX1RBR30pO1xyXG4gICAgICAgIHJldHVybiAoYXdhaXQgd2luZG93LndlYjMuZXRoLnBlcnNvbmFsLnNpZ24obWVzc2FnZSwgZGF0YS5FVEhfV0VCM19JTVBBUlRFUl9UQUcud2FsbGV0QWRkcmVzcywgJycpKTtcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVRyYW5zYWN0aW9uKGltcGFydGVyVGFnLCBhbW91bnQsIHRvLCBvcHRpb25zKSB7XHJcbiAgICBzd2l0Y2ggKGltcGFydGVyVGFnKSB7XHJcbiAgICAgIGNhc2UgT0hMRURHRVJfSU1QQVJURVJfVEFHOlxyXG4gICAgICAgIGlmICghZGF0YS5PSExFREdFUl9JTVBBUlRFUl9UQUcubW9kZSkgdGhyb3cgbmV3IEVycm9yKFwibmV0d29yayAnbW9kZScgbXVzdCBiZSBzZXQsIHVzZSBzZXROZXR3b3JrXCIpO1xyXG4gICAgICAgIGlmICghZGF0YS5PSExFREdFUl9JTVBBUlRFUl9UQUcuYWRkcmVzcykgdGhyb3cgbmV3IEVycm9yKFwiZnJvbSAnYWRkcmVzcycgbm90IHNldDogdXNlIHNldENyZWRlbnRpYWxzXCIpO1xyXG4gICAgICAgIHZhciBmcm9tID0gZGF0YS5PSExFREdFUl9JTVBBUlRFUl9UQUcuYWRkcmVzcztcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBPSExFREdFUl9XRUIzX0lNUEFSVEVSX1RBRzpcclxuICAgICAgICBpZiAoIWRhdGEuT0hMRURHRVJfV0VCM19JTVBBUlRFUl9UQUcubW9kZSkgdGhyb3cgbmV3IEVycm9yKFwibmV0d29yayAnbW9kZScgbXVzdCBiZSBzZXQsIHVzZSBzZXROZXR3b3JrXCIpO1xyXG4gICAgICAgIGlmICghZGF0YS5PSExFREdFUl9XRUIzX0lNUEFSVEVSX1RBRy53YWxsZXRBZGRyZXNzKSB0aHJvdyBuZXcgRXJyb3IoXCJmcm9tICd3YWxsZXRBZGRyZXNzJyBub3Qgc2V0OiB1c2Ugd2FsbGV0XCIpO1xyXG4gICAgICAgIHZhciBmcm9tID0gZGF0YS5PSExFREdFUl9XRUIzX0lNUEFSVEVSX1RBRy53YWxsZXRBZGRyZXNzO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIEVUSF9XRUIzX0lNUEFSVEVSX1RBRzpcclxuICAgICAgICBpZiAoIWRhdGEuRVRIX1dFQjNfSU1QQVJURVJfVEFHLm5ldHdvcmspIHRocm93IG5ldyBFcnJvcihcIm5vIG5ldHdvcmsgZm9yIGltcGFydGVyIHRhZ1wiKTtcclxuICAgICAgICBpZiAoIWRhdGEuRVRIX1dFQjNfSU1QQVJURVJfVEFHLndhbGxldEFkZHJlc3MpIHRocm93IG5ldyBFcnJvcihcImZyb20gJ3dhbGxldEFkZHJlc3MnIG5vdCBzZXQ6IHVzZSB3YWxsZXRcIik7XHJcbiAgICAgICAgdmFyIGZyb20gPSBkYXRhLkVUSF9XRUIzX0lNUEFSVEVSX1RBRy53YWxsZXRBZGRyZXNzO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcigndW5zdXBwb3J0ZWQgaW1wYXJ0ZXIgdGFnJyk7XHJcbiAgICB9XHJcbiAgICBzd2l0Y2ggKGltcGFydGVyVGFnKSB7XHJcbiAgICAgIGNhc2UgT0hMRURHRVJfSU1QQVJURVJfVEFHOlxyXG4gICAgICBjYXNlIE9ITEVER0VSX1dFQjNfSU1QQVJURVJfVEFHOlxyXG4gICAgICAgIGlmIChhbW91bnQgPT0gMCkge1xyXG4gICAgICAgICAgaWYgKCdtZXNzYWdlJyBpbiBvcHRpb25zICYmIG9wdGlvbnMubWVzc2FnZSAmJiAnc2lnbmF0dXJlJyBpbiBvcHRpb25zICYmIG9wdGlvbnMuc2lnbmF0dXJlKSB7XHJcbiAgICAgICAgICAgIHZhciBtZXNzYWdlID0gb3B0aW9ucy5tZXNzYWdlO1xyXG4gICAgICAgICAgICB2YXIgc2lnbmF0dXJlID0gb3B0aW9ucy5zaWduYXR1cmU7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgbWVzc2FnZSA9IGB2ZXJpZnkgb3duZXJzaGlwIG9mIGFkZHJlc3MgYnkgc2lnbmluZyBvbiAke25ldyBEYXRlKCkudG9Mb2NhbGVTdHJpbmcoKX1gO1xyXG4gICAgICAgICAgICB2YXIgc2lnbmF0dXJlID0gYXdhaXQgc2lnbihpbXBhcnRlclRhZywgbWVzc2FnZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBhd2FpdCBzaG93T2hMZWRnZXJHcmF0aXNJZnJhbWVVcmkoaW1wYXJ0ZXJUYWcsIGZyb20sIHNpZ25hdHVyZSwgbWVzc2FnZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGxldCBldmVudFByb21pc2UgPSBzZXR1cE5ld1Byb21pc2UoKTtcclxuICAgICAgICAgIGRhdGEuT0hMRURHRVJfSU1QQVJURVJfVEFHLm9oX2xlZGdlcl90cmFuc2FjdF9mbltkYXRhLk9ITEVER0VSX0lNUEFSVEVSX1RBRy5tb2RlXShhbW91bnQsIGZyb20sIHRvKTtcclxuICAgICAgICAgIGF3YWl0IGV2ZW50UHJvbWlzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgRVRIX1dFQjNfSU1QQVJURVJfVEFHOlxyXG4gICAgICAgIGZpcmUoJ29uV2FsbGV0UG9wdXAnLCB7aW1wYXJ0ZXJUYWc6IEVUSF9XRUIzX0lNUEFSVEVSX1RBR30pO1xyXG4gICAgICAgIGF3YWl0IChuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICB3ZWIzLmV0aC5zZW5kVHJhbnNhY3Rpb24oeyBmcm9tOiBmcm9tLCB0bzogdG8sIHZhbHVlOiBhbW91bnQgfSlcclxuICAgICAgICAgIC5vbignY29uZmlybWF0aW9uJywgZnVuY3Rpb24gKGNvbmZpcm1hdGlvbk51bWJlciwgcmVjZWlwdCkge1xyXG4gICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLm9uKCdlcnJvcicsIChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgfSk7IFxyXG4gICAgICAgIH0pKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Vuc3VwcG9ydGVkIGltcGFydGVyIHRhZycpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICB2YXIgcmVzb2x2ZSA9IG51bGw7XHJcbiAgdmFyIHJlamVjdCA9IG51bGw7XHJcblxyXG4gIC8vIHByb21pc2UgdXNlZCBmb3IgcG9wdXBzIGFuZCByZXNvbHV0aW9ucyB2aWEgb2gtbGVkZ2VyLSogbWVzc2FnZXMuXHJcbiAgZnVuY3Rpb24gc2V0dXBOZXdQcm9taXNlKCkge1xyXG4gICAgY29uc29sZS5hc3NlcnQoIXJlc29sdmUsICdvaC1wb3B1cCBwcm9taXNlIGJlaW5nIHNldCBidXQgYWxyZWFkeSBzZXQgd2hlbiBjYWxsaW5nIHNldHVwTmV3UHJvbWlzZSguLiknKTtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocnMsIHJqKSA9PiB7XHJcbiAgICAgIHJlc29sdmUgPSBycztcclxuICAgICAgcmVqZWN0ID0gcmo7XHJcbiAgICB9KTsgICAgXHJcbiAgfVxyXG5cclxuICAvLyBtYWtlIHBvcHVwIHZpc2libGUgdG8gYmUgaGlkZGVuIHdpdGggbWFrZVBvcHVwSGlkZGVuXHJcbiAgZnVuY3Rpb24gbWFrZVBvcHVwVmlzaWJsZSgpIHtcclxuICAgIHZhciBwb3B1cCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvaC1wb3B1cC1jb250YWluZXInKTtcclxuICAgIHBvcHVwLnN0eWxlLmRpc3BsYXk9J2Jsb2NrJztcclxuICAgIHJldHVybiBzZXR1cE5ld1Byb21pc2UoKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIG1ha2VQb3B1cEhpZGRlbihwYXJhbXMsIGlzRXJyb3IpIHtcclxuICAgIHZhciBwb3B1cCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvaC1wb3B1cC1jb250YWluZXInKTtcclxuICAgIGhpZGVBbGxQb3B1cENvbnRlbnRzKCk7XHJcbiAgICBwb3B1cC5zdHlsZS5kaXNwbGF5PSdub25lJztcclxuICAgIGNvbnNvbGUuYXNzZXJ0KHJlc29sdmUsICdvaC1wb3B1cCBwcm9taXNlIG5vdCBzZXQgeWV0IGNhbGxpbmcgbWFrZVBvcHVwSGlkZGVuKC4uKScpO1xyXG4gICAgaWYgKGlzRXJyb3IpIHJlamVjdChwYXJhbXMpXHJcbiAgICBlbHNlIHJlc29sdmUocGFyYW1zKTtcclxuICAgIHJlc29sdmUgPSBudWxsO1xyXG4gICAgcmVqZWN0ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgKGUpID0+IHtcclxuICAgIGlmIChlLmRhdGEgJiYgZS5kYXRhLmV2ZW50ID09PSAnb2gtbGVkZ2VyLW9rJykge1xyXG4gICAgICBtYWtlUG9wdXBIaWRkZW4oZS5kYXRhLmRldGFpbCk7XHJcbiAgICB9IGVsc2UgaWYgKGUuZGF0YSAmJiBlLmRhdGEuZXZlbnQgPT09ICdvaC1sZWRnZXItZXJyb3InKSB7XHJcbiAgICAgIG1ha2VQb3B1cEhpZGRlbihlLmRhdGEuZGV0YWlsLCB0cnVlKTtcclxuICAgIH1cclxuICB9LCBmYWxzZSk7XHJcblxyXG4gIGZ1bmN0aW9uIGhpZGVBbGxQb3B1cENvbnRlbnRzKCkge1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ29oLWxlZGdlci1ncmF0aXMtaWZyYW1lJykuc3R5bGUuZGlzcGxheT0nbm9uZSc7XHJcbiAgfVxyXG5cclxuICBhc3luYyBmdW5jdGlvbiBzaG93T2hMZWRnZXJHcmF0aXNJZnJhbWVVcmkoaW1wYXJ0ZXJUYWcsIGZyb20sIHNpZ25hdHVyZSwgbWVzc2FnZSkge1xyXG4gICAgaGlkZUFsbFBvcHVwQ29udGVudHMoKTtcclxuICAgIGxldCB1cmkgPSBnZXRPdmVyaGlkZVJlbXVuZXJhdGlvbkFQSVVyaShpbXBhcnRlclRhZyk7XHJcbiAgICB2YXIgZnJhbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb2gtbGVkZ2VyLWdyYXRpcy1pZnJhbWUnKTtcclxuICAgIGZyYW1lLnNldEF0dHJpYnV0ZSgnc3JjJywgYCR7dXJpfS9ncmF0aXMuaHRtbD9hZGRyZXNzPSR7ZnJvbX0mc2lnbmF0dXJlPSR7c2lnbmF0dXJlfSZtZXNzYWdlPSR7bWVzc2FnZX1gKTtcclxuICAgIGZyYW1lLnN0eWxlLmRpc3BsYXk9J2Jsb2NrJzsgICAgXHJcbiAgICBhd2FpdCBtYWtlUG9wdXBWaXNpYmxlKCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjcmVhdGVQb3B1cCgpIHtcclxuICAgIHZhciBwb3B1cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgcG9wdXAuc2V0QXR0cmlidXRlKCdpZCcsJ29oLXBvcHVwLWNvbnRhaW5lcicpO1xyXG4gICAgcG9wdXAuc3R5bGUuZGlzcGxheT0nbm9uZSc7XHJcbiAgICBwb3B1cC5pbm5lckhUTUwgPSBgXHJcbiAgICAgIDxkaXY+XHJcbiAgICAgICAgPGEgaHJlZj1cIiNcIiB0aXRsZT1cIkNsb3NlXCIgaWQ9XCJvaC1wb3B1cC1jbG9zZVwiIG9uY2xpY2s9XCJ3aW5kb3cucGFyZW50LmRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdvaCQtcG9wdXAtY2xvc2UnLHt9KSk7IHJldHVybiBmYWxzZTtcIj5YPC9hPlxyXG4gICAgICAgIDxpZnJhbWUgaWQ9XCJvaC1sZWRnZXItZ3JhdGlzLWlmcmFtZVwiPjwvaWZyYW1lPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIGA7XHJcbiAgICB2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xyXG4gICAgc3R5bGUuaW5uZXJIVE1MID1gXHJcbiAgICAgICNvaC1wb3B1cC1jb250YWluZXIge1xyXG4gICAgICAgICAgcG9zaXRpb246IGZpeGVkO1xyXG4gICAgICAgICAgZm9udC1mYW1pbHk6IGFyaWFsLCBcImx1Y2lkYSBjb25zb2xlXCIsIHNhbnMtc2VyaWY7XHJcbiAgICAgICAgICB0b3A6IDA7XHJcbiAgICAgICAgICByaWdodDogMDtcclxuICAgICAgICAgIGJvdHRvbTogMDtcclxuICAgICAgICAgIGxlZnQ6IDA7XHJcbiAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuOCk7XHJcbiAgICAgICAgICB6LWluZGV4OiA5OTk7XHJcbiAgICAgICAgICBvcGFjaXR5OjE7XHJcbiAgICAgICAgICBwb2ludGVyLWV2ZW50czogYXV0bztcclxuICAgICAgfVxyXG4gICAgICAjb2gtcG9wdXAtY29udGFpbmVyID4gZGl2IHtcclxuICAgICAgICAgIHdpZHRoOiA4MHZ3O1xyXG4gICAgICAgICAgaGVpZ2h0OiA3NXZoO1xyXG4gICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgICAgICAgdG9wOiAxNXZoO1xyXG4gICAgICAgICAgbWFyZ2luOiBhdXRvIGF1dG87XHJcbiAgICAgICAgICBwYWRkaW5nOiA1cHggNXB4IDVweCA1cHg7XHJcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTtcclxuICAgICAgfVxyXG4gICAgICAjb2gtcG9wdXAtY2xvc2Uge1xyXG4gICAgICAgICAgYmFja2dyb3VuZDogZ3JleTtcclxuICAgICAgICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgICAgICAgIGxpbmUtaGVpZ2h0OiAyNXB4O1xyXG4gICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgICAgcmlnaHQ6IDJweDtcclxuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgICAgICAgIHRvcDogMnB4O1xyXG4gICAgICAgICAgd2lkdGg6IDI0cHg7XHJcbiAgICAgICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XHJcbiAgICAgICAgICBmb250LXdlaWdodDogYm9sZDtcclxuICAgICAgfVxyXG4gICAgICAjb2gtcG9wdXAtY2xvc2U6aG92ZXIge1xyXG4gICAgICAgICAgYmFja2dyb3VuZDogYmxhY2s7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgICNvaC1sZWRnZXItZ3JhdGlzLWlmcmFtZSB7XHJcbiAgICAgICAgZGlzcGxheTogbm9uZTtcclxuICAgICAgICBib3JkZXI6IDA7XHJcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICAgICAgICB3aWR0aDogMTAwJTtcclxuICAgICAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICAgIH1cclxuICAgIGA7XHJcbiAgICB2YXIgYXR0YWNoID0gKCkgPT4ge1xyXG4gICAgICBpZiAoZG9jdW1lbnQuYm9keSkge1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQocG9wdXApO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc3R5bGUpO1xyXG4gICAgICAgIGxvYWRPaExlZGdlclRyYW5zYWN0Rm5zKCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2V0VGltZW91dChhdHRhY2gsIDEwMCk7XHJcbiAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgYXR0YWNoKCk7XHJcbiAgfVxyXG5cclxuICB3aW5kb3cuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignb2gkLXBvcHVwLWNsb3NlJywgKGUpID0+IHtcclxuICAgIG1ha2VQb3B1cEhpZGRlbigndXNlciBjbG9zZScsIHRydWUpO1xyXG4gIH0pO1xyXG5cclxuICAvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMzEzNzQ0MzNcclxuICBmdW5jdGlvbiBsb2FkSlModXJsLCBpbXBsZW1lbnRhdGlvbkNvZGUsIGxvY2F0aW9uKSB7XHJcbiAgICAvL3VybCBpcyBVUkwgb2YgZXh0ZXJuYWwgZmlsZSwgaW1wbGVtZW50YXRpb25Db2RlIGlzIHRoZSBjb2RlXHJcbiAgICAvL3RvIGJlIGNhbGxlZCBmcm9tIHRoZSBmaWxlLCBsb2NhdGlvbiBpcyB0aGUgbG9jYXRpb24gdG8gXHJcbiAgICAvL2luc2VydCB0aGUgPHNjcmlwdD4gZWxlbWVudFxyXG5cclxuICAgIHZhciBzY3JpcHRUYWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuICAgIHNjcmlwdFRhZy5zcmMgPSB1cmw7XHJcblxyXG4gICAgc2NyaXB0VGFnLm9ubG9hZCA9IGltcGxlbWVudGF0aW9uQ29kZTtcclxuICAgIHNjcmlwdFRhZy5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBpbXBsZW1lbnRhdGlvbkNvZGU7XHJcblxyXG4gICAgbG9jYXRpb24uYXBwZW5kQ2hpbGQoc2NyaXB0VGFnKTtcclxuICB9O1xyXG5cclxuICBmdW5jdGlvbiBsb2FkT2hMZWRnZXJUcmFuc2FjdEZucygpIHtcclxuICAgIC8vIGxvYWQgcHJvZCBvaGxlZGdlciB0cmFuc2FjdCBmblxyXG4gICAgbG9hZEpTKGAke2RhdGEuT0hMRURHRVJfSU1QQVJURVJfVEFHLnJlbXVuZXJhdGlvbl91cmkucHJvZH0vdHJhbnNhY3QuanNgLCAoKSA9PiB7XHJcbiAgICAgIGRhdGEuT0hMRURHRVJfSU1QQVJURVJfVEFHLm9oX2xlZGdlcl90cmFuc2FjdF9mbi5wcm9kID0gb2hfbGVkZ2VyX3RyYW5zYWN0O1xyXG4gICAgICBkYXRhLk9ITEVER0VSX1dFQjNfSU1QQVJURVJfVEFHLm9oX2xlZGdlcl90cmFuc2FjdF9mbi5wcm9kID0gb2hfbGVkZ2VyX3RyYW5zYWN0O1xyXG4gICAgfSwgZG9jdW1lbnQuYm9keSk7XHJcblxyXG4gICAgLy8gbG9hZCB0ZXN0IG9obGVkZ2VyIHRyYW5zYWN0IGZuXHJcbiAgICBsb2FkSlMoYCR7ZGF0YS5PSExFREdFUl9JTVBBUlRFUl9UQUcucmVtdW5lcmF0aW9uX3VyaS50ZXN0fS90cmFuc2FjdC5qc2AsICgpID0+IHtcclxuICAgICAgZGF0YS5PSExFREdFUl9JTVBBUlRFUl9UQUcub2hfbGVkZ2VyX3RyYW5zYWN0X2ZuLnRlc3QgPSBvaF9sZWRnZXJfdHJhbnNhY3Q7XHJcbiAgICAgIGRhdGEuT0hMRURHRVJfV0VCM19JTVBBUlRFUl9UQUcub2hfbGVkZ2VyX3RyYW5zYWN0X2ZuLnRlc3QgPSBvaF9sZWRnZXJfdHJhbnNhY3Q7XHJcbiAgICB9LCBkb2N1bWVudC5ib2R5KTtcclxuICB9XHJcblxyXG4gIHJldHVybiByb290Lm9oJDtcclxufSkoKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IG9oJDsiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBS0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBb2JBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSEE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFSQTtBQWFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFQQTtBQXRCQTtBQW9DQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUhBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQVFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBVEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQVlBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUhBO0FBQUE7QUFDQTtBQURBO0FBSUE7QUFKQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBTUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUEvQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBZ0NBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUxBO0FBT0E7QUFDQTtBQXBsQkE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBcWxCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFUQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQWlCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBakJBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQXJsQkE7QUFBQTtBQUNBO0FBNG1CQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBUkE7QUFVQTtBQUNBO0FBem5CQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUEwbkJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQU5BO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQTFuQkE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBdW9CQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUlBO0FBQ0E7QUFDQTtBQU5BO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQVVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBWEE7QUFDQTtBQURBO0FBY0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFmQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUF2b0JBO0FBQUE7QUFDQTtBQTRwQkE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBUkE7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBVkE7QUFZQTtBQUNBO0FBeHJCQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUF5ckJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBTUE7QUFDQTtBQVBBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQVVBO0FBQ0E7QUFEQTtBQURBO0FBS0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQWxCQTtBQVNBO0FBQ0E7QUFWQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBenJCQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFrdEJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFJQTtBQUpBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBT0E7QUFDQTtBQVJBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFTQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBWEE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBY0E7QUFDQTtBQURBO0FBREE7QUFLQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBdEJBO0FBYUE7QUFiQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFsdEJBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQTh1QkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQTl1QkE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBa3ZCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBbHZCQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFneUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFweUJBO0FBQUE7QUFzdkJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFKQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFTQTtBQVRBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBY0E7QUFkQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQW1CQTtBQW5CQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBeUJBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQTdCQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUErQkE7QUFDQTtBQURBO0FBREE7QUFLQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBdkNBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBdHZCQTtBQUFBO0FBQ0E7QUFreUJBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQUE7QUFLQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBSEE7QUFBQTtBQUtBO0FBQ0E7QUF0ekJBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQXV6QkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBTUE7QUFOQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQVdBO0FBWEE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFnQkE7QUFoQkE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQXNCQTtBQXRCQTtBQUFBO0FBQ0E7QUFEQTtBQXVCQTtBQXZCQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUEwQkE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFOQTtBQWFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQS9DQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQXZ6QkE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBdzJCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQU9BO0FBQUE7QUFBQTtBQVBBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQVdBO0FBQUE7QUFBQTtBQVhBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBeDJCQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUEwM0JBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFLQTtBQUxBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBVUE7QUFWQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQWVBO0FBZkE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBd0JBO0FBQ0E7QUExQkE7QUFBQTtBQUNBO0FBREE7QUE0QkE7QUE1QkE7QUFBQTtBQUNBO0FBREE7QUE2QkE7QUFDQTtBQTlCQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFpQ0E7QUFDQTtBQWxDQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQXVDQTtBQUFBO0FBQUE7QUF2Q0E7QUFBQTtBQXlDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBakRBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBMTNCQTtBQUFBO0FBQ0E7QUFpN0JBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBMzlCQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUE0OUJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUE1OUJBO0FBQUE7QUFDQTtBQW8rQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQTZDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/ledgers.js\n");

/***/ }),

/***/ "web3":
/*!**********************************************************************************!*\
  !*** external {"commonjs":"web3","commonjs2":"web3","amd":"web3","root":"Web3"} ***!
  \**********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = __WEBPACK_EXTERNAL_MODULE_web3__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2ViMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL19fb2gkX18vZXh0ZXJuYWwge1wiY29tbW9uanNcIjpcIndlYjNcIixcImNvbW1vbmpzMlwiOlwid2ViM1wiLFwiYW1kXCI6XCJ3ZWIzXCIsXCJyb290XCI6XCJXZWIzXCJ9PzA1YzIiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX3dlYjNfXzsiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///web3\n");

/***/ })

/******/ });
});